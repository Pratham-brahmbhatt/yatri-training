<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YATRI Staff Portal</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap');
    /* Global Styles */
    * {
        box-sizing: border-box;
    }
    
    body { 
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
        margin: 0; 
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
        color: #FFD700; 
        line-height: 1.6; 
        overflow-x: hidden;
        min-height: 100vh;
    }
    
    /* Subtle animated background */
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(255, 215, 0, 0.05) 0%, transparent 50%);
        animation: backgroundShift ss ease-in-out infinite;
        z-index: -1;
    }
    
    @keyframes backgroundShift {
        0%, 100% { transform: translateX(0) translateY(0); }
        25% { transform: translateX(-15px) translateY(-8px); }
        50% { transform: translateX(8px) translateY(-15px); }
        75% { transform: translateX(-8px) translateY(8px); }
    }
    
    header { 
        background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        color: #FFD700; 
        padding: 20px; 
        text-align: center; 
        position: relative; 
        border-bottom: 2px solid #FFD700; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(20px);
        border-radius: 0 0 16px 16px;
        margin-bottom: 2px;
    }
    
    header .header-logo { 
        width: 100px; 
        height: auto; 
        position: absolute; 
        left: 20px; 
        top: 50%; 
        transform: translateY(-50%);
        filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.4));
        transition: all 0.3s ease;
    }
    
    header .header-logo:hover {
        transform: translateY(-50%) scale(1.05);
        filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.6));
    }
    
    .logo-container { text-align: center; padding: 30px 0; }
    .logo { 
        width: 180px; 
        height: auto; 
        max-width: 100%; 
        filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.4));
        transition: all 0.3s ease;
    }
    
    .logo:hover {
        transform: scale(1.05);
        filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.6));
    }
    
    nav { 
        background: linear-gradient(135deg, #333 0%, #444 100%);
        padding: 15px; 
        display: flex; 
        flex-wrap: wrap; 
        gap: 12px; 
        justify-content: center; 
        border-bottom: 1px solid #555;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
        border-radius: 0 0 12px 12px;
        margin-bottom: 2px;
    }
    
    nav a { 
        color: #FFD700; 
        text-decoration: none; 
        padding: 12px 20px; 
        border-radius: 8px; 
        background: linear-gradient(135deg, #444 0%, #555 100%);
        cursor: pointer; 
        transition: all 0.3s ease; 
        font-weight: 500; 
        text-transform: uppercase; 
        letter-spacing: 0.5px;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 215, 0, 0.2);
        font-size: 0.9em;
    }
    
    nav a::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.2), transparent);
        transition: left 0.5s ease;
    }
    
    nav a:hover::before {
        left: 100%;
    }
    
    nav a.completed { 
        background: linear-gradient(135deg, #008000 0%, #00aa00 100%);
        box-shadow: 0 0 20px rgba(0, 128, 0, 0.3);
        border-color: rgba(0, 128, 0, 0.4);
    }
    
    nav a.disabled { 
        cursor: not-allowed; 
        opacity: 0.4; 
        background: linear-gradient(135deg, #555 0%, #666 100%);
        pointer-events: none; 
        border-color: rgba(255, 215, 0, 0.1);
    }
    
    nav a:hover:not(.disabled) { 
        background: linear-gradient(135deg, #FFD700 0%, #e6b800 100%);
        color: #000000; 
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        border-color: rgba(255, 215, 0, 0.5);
    }
    
    .container { 
        max-width: 1200px; 
        margin: 30px auto; 
        padding: 30px; 
        background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        border-radius: 16px; 
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 215, 0, 0.2);
    }
    
    h2, h3 { 
        margin-top: 0; 
        color: #FFD700; 
        border-bottom: 2px solid #FFD700; 
        padding-bottom: 12px; 
        margin-bottom: 24px;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
    }
    
    p { margin-bottom: 16px; color: #E0E0E0;}
    ul { list-style-type: disc; margin-left: 24px; margin-bottom: 16px; }
    li { margin-bottom: 10px; color: #E0E0E0; }
    
    .btn { 
        padding: 14px 28px; 
        background: linear-gradient(135deg, #FFD700 0%, #e6b800 100%);
        color: #000000; 
        border: none; 
        border-radius: 10px; 
        cursor: pointer; 
        font-weight: 600; 
        transition: all 0.3s ease; 
        margin: 0 8px; 
        text-transform: uppercase; 
        letter-spacing: 0.5px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
        font-size: 0.9em;
    }
    
    .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
    }
    
    .btn:hover::before {
        left: 100%;
    }
    
    .btn:hover:not(.disabled) { 
        background: linear-gradient(135deg, #e6b800 0%, #d4a600 100%);
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(255, 215, 0, 0.4);
    }
    
    .btn.disabled { 
        background: linear-gradient(135deg, #555 0%, #666 100%);
        color: #888; 
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
    }
    
    footer { 
        text-align: center; 
        padding: 20px; 
        color: #999; 
        margin-top: 40px; 
        border-top: 1px solid #333;
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
    }
    
    .page { display: none; }
    .active { display: block; }

/* --- Styles for Module Hub --- */
#module-grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
    margin-top: 40px;
}

.module-box {
    background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
    padding: 32px 24px;
    border-radius: 16px;
    text-align: center;
    font-size: 1.3em;
    font-weight: 600;
    cursor: pointer;
    border-left: 4px solid #FFD700;
    transition: all 0.3s ease;
    color: #FFD700;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 215, 0, 0.2);
}

.module-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
    transition: left 0.6s ease;
}

.module-box:hover::before {
    left: 100%;
}

.module-box:hover {
    transform: translateY(-8px) scale(1.02);
    background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);
    box-shadow: 0 16px 40px rgba(255, 215, 0, 0.2);
    border-left-color: #e6b800;
    border-color: rgba(255, 215, 0, 0.4);
}

.module-box.completed {
    background: linear-gradient(135deg, #014a01 0%, #026a02 100%);
    border-left-color: #00ff00;
    color: #ffffff;
    box-shadow: 0 8px 25px rgba(0, 255, 0, 0.2);
    border-color: rgba(0, 255, 0, 0.3);
}

.module-box.completed:hover {
    background: linear-gradient(135deg, #026a02 0%, #038a03 100%);
    box-shadow: 0 16px 40px rgba(0, 255, 0, 0.3);
}

.module-box.locked {
    background: linear-gradient(135deg, #222 0%, #333 100%);
    border-left-color: #555;
    color: #777;
    cursor: not-allowed;
    opacity: 0.6;
    box-shadow: none;
    border-color: rgba(100, 116, 139, 0.2);
}

.module-box.locked:hover {
    transform: none;
    background: linear-gradient(135deg, #222 0%, #333 100%);
    box-shadow: none;
}

    /* --- Styles for Redesigned Professional Welcome Page --- */
    #welcome .container { background-color: transparent; box-shadow: none; padding: 0; }
    .welcome-hero { text-align: center; padding: 40px 20px; background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%); border-radius: 16px; border: 1px solid rgba(255, 215, 0, 0.2); }
    .welcome-hero h2 { font-size: 3em; color: #FFD700; border: none; text-shadow: 0 2px 4px rgba(0,0,0,0.5); animation: fadeInDown 1s ease-out; }
    .welcome-hero p { font-size: 1.3em; color: #E0E0E0; max-width: 700px; margin: 10px auto 0 auto; animation: fadeInUp 1s ease-out 0.5s; opacity: 0; animation-fill-mode: forwards; }
    .welcome-content { display: flex; flex-direction: column; gap: 40px; padding-top: 40px; }
    .welcome-story, .welcome-mission { display: flex; align-items: center; gap: 30px; animation: slideInUp 1s ease-out 1s; opacity: 0; animation-fill-mode: forwards; }
    .welcome-story:nth-child(even) { flex-direction: row-reverse; }
    .welcome-story-text, .welcome-mission-text { flex: 1.5; }
    .welcome-story-image, .welcome-mission-image { flex: 1; border-radius: 8px; max-width: 40%; object-fit: cover; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
    .welcome-values { text-align: center; animation: slideInUp 1s ease-out 1.5s; opacity: 0; animation-fill-mode: forwards; }
    .values-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; text-align: left; }
    .value-card { background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%); padding: 20px; border-radius: 8px; border-left: 5px solid #FFD700; transition: transform 0.3s ease; }
    .value-card:hover { transform: translateY(-5px); }
    .value-card h4 { margin-top: 0; color: #FFD700; font-size: 1.2em; }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 768px) {
        .welcome-story, .welcome-story:nth-child(even) { flex-direction: column; }
        .welcome-story-image, .welcome-mission-image { max-width: 100%; }
    }

    /* --- Styles for Redesigned Responsibilities Page --- */
    .responsibilities-intro { text-align: center; margin-bottom: 40px; }
    .responsibilities-intro h2 { border: none; font-size: 2.5em; }
    .responsibilities-intro p { font-size: 1.2em; max-width: 80%; margin: 0 auto; color: #E0E0E0; }
    .tabs-container { width: 100%; }
    .tab-buttons { display: flex; border-bottom: 2px solid #555; margin-bottom: 20px; }
    .tab-button { padding: 10px 20px; cursor: pointer; background-color: transparent; border: none; color: #aaa; font-size: 1.1em; font-weight: bold; transition: color 0.3s ease, border-bottom 0.3s ease; border-bottom: 3px solid transparent; }
    .tab-button.active { color: #FFD700; border-bottom: 3px solid #FFD700; }
    .tab-content { display: none; animation: fadeIn 0.5s ease; }
    .tab-content.active { display: block; }
    .tab-content ul { list-style-type: '✓'; padding-left: 20px; }
    .tab-content ul li { padding-left: 10px; margin-bottom: 12px; }
    .spec-section { margin-top: 40px; text-align: center; }
    .spec-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; text-align: left; margin-top: 20px; }
    .spec-card { background-color: #2a2a2a; padding: 20px; border-radius: 8px; border-top: 4px solid #FFD700; }
    .spec-card h4 { margin-top: 0; color: #FFD700; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* --- Styles for Steps of Service Page --- */
    .service-steps-container { padding: 10px; }
    .service-step { display: flex; align-items: flex-start; margin-bottom: 25px; }
    .step-number { font-size: 2.5em; font-weight: bold; color: #FFD700; line-height: 1; margin-right: 20px; }
    .step-details h3 { border: none; margin: 0 0 5px 0; padding: 0; font-size: 1.4em; }
    .step-details .action { font-weight: bold; color: #FFFFFF; }
    .step-details .key-points { color: #b0b0b0; }

    /* --- Styles for Uniform Page --- */
    .uniform-layout { display: flex; gap: 30px; margin-top: 20px; }
    .uniform-image-container { flex: 1; max-width: 35%; }
    .uniform-image-container img { width: 100%; height: auto; border-radius: 8px; }
    .uniform-details { flex: 1.5; }
    .uniform-category { background-color: #2a2a2a; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #FFD700; }
    .uniform-category h3 { border-bottom: none; padding-bottom: 0; margin-bottom: 10px; font-size: 1.4em; }
    .uniform-category ul { list-style-type: '✓'; padding-left: 20px; margin-bottom: 0; }
    .uniform-category ul li { padding-left: 10px; margin-bottom: 10px; }
    @media (max-width: 768px) {
        .uniform-layout { flex-direction: column; }
        .uniform-image-container { max-width: 100%; }
    }

    /* --- Styles for Allergen Page --- */
    .allergen-main-content { 
        display: flex; 
        gap: 30px; 
        margin-top: 20px; 
    }
    
    .allergen-left-col { 
        flex: 1.5; 
    }
    
    .allergen-right-col { 
        flex: 1; 
    }
    
    .allergen-columns { 
        display: flex; 
        gap: 15px; 
        margin-top: 20px; 
    }
    
    .allergen-column { 
        flex: 1; 
        display: flex; 
        flex-direction: column; 
        gap: 15px; 
    }
    
    .allergen-item { 
        background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
        padding: 15px; 
        border-radius: 12px; 
        text-align: center; 
        display: flex; 
        align-items: center; 
        gap: 15px;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 215, 0, 0.1);
    }
    
    .allergen-item:hover {
        transform: translateY(-5px) scale(1.02);
        background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2);
        border-color: rgba(255, 215, 0, 0.3);
    }
    
    .allergen-item img { 
        width: 50px; 
        height: 50px; 
        border-radius: 50%; 
        object-fit: cover;
        border: 2px solid rgba(255, 215, 0, 0.3);
        transition: all 0.3s ease;
    }
    
    .allergen-item:hover img {
        border-color: rgba(255, 215, 0, 0.6);
        transform: scale(1.1);
    }
    
    .allergen-item span { 
        font-size: 1em; 
        color: #FFFFFF;
        font-weight: bold;
    }
    
    .protocol-step { 
        position: relative; 
        margin-bottom: 25px;
        background: linear-gradient(135deg, rgba(42, 42, 42, 0.5) 0%, rgba(58, 58, 58, 0.5) 100%);
        padding: 20px 20px 20px 55px; /* This is the fix */
        border-radius: 8px;
        backdrop-filter: blur(5px);
    }
    
    .protocol-step h4 { 
        margin: 0 0 5px 0; 
        font-size: 1.2em; 
        color: #FFFFFF;
    }
    
    .protocol-step h4 span { 
        position: absolute; 
        left: 15px; 
        top: 15px; 
        font-size: 2em; 
        font-weight: bold; 
        color: #FFD700;
    }
    
    .emergency-protocol { 
        background: linear-gradient(135deg, #3e2a2a 0%, #4e3a3a 100%);
        padding: 25px; 
        border-radius: 12px; 
        border-left: 5px solid #ff4d4d; 
        margin-top: 30px;
        box-shadow: 0 4px 15px rgba(255, 77, 77, 0.2);
    }
    
    .emergency-protocol h3 { 
        color: #ff4d4d; 
        border-bottom-color: #ff4d4d;
    }
    
    .emergency-protocol ol { 
        padding-left: 20px; 
        margin-bottom: 0; 
    }
    
    @media (max-width: 800px) {
        .allergen-main-content, .allergen-columns { flex-direction: column; }
    }

    /* Video Section Styles */
    .video-section {
        background: linear-gradient(135deg, rgba(42, 42, 42, 0.8) 0%, rgba(58, 58, 58, 0.8) 100%);
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 25px;
        border: 1px solid rgba(255, 215, 0, 0.2);
        backdrop-filter: blur(5px);
    }
    
    .video-section h4 {
        color: #FFD700;
        margin-bottom: 15px;
        font-size: 1.3em;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .video-container {
        position: relative;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        margin-bottom: 15px;
    }
    
    .video-container iframe {
        border-radius: 8px;
    }
    
    .video-description {
        color: #E0E0E0;
        font-style: italic;
        text-align: center;
        margin: 0;
    }

    /* Enhanced Interactive Elements */
    .interactive-card {
        background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
        border-radius: 12px;
        padding: 20px;
        margin: 15px 0;
        border: 1px solid rgba(255, 215, 0, 0.1);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }
    
    .interactive-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
        transition: left 0.6s ease;
    }
    
    .interactive-card:hover::before {
        left: 100%;
    }
    
    .interactive-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2);
        border-color: rgba(255, 215, 0, 0.3);
    }
    
    .floating-animation {
        animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }
    
    .pulse-animation {
        animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }
    
    .slide-in-left {
        animation: slideInLeft 0.8s ease-out;
        animation-fill-mode: forwards; /* Add this line */
    }
    
    @keyframes slideInLeft {
        from { transform: translateX(-100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    .slide-in-right {
        animation: slideInRight 0.8s ease-out;
        animation-fill-mode: forwards; /* Add this line */
    }
    
    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }
    
    .fade-in-up {
        animation: fadeInUp 1s ease-out;
        animation-fill-mode: forwards; /* Add this line */
    }
    
    @keyframes fadeInUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    /* --- Styles for Safety & Hygine Page --- */
    .safety-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
    .safety-card { background-color: #2a2a2a; padding: 25px; border-radius: 8px; }
    .safety-card h3 { display: flex; align-items: center; gap: 10px; border-bottom: none; padding-bottom: 0; margin-bottom: 15px; font-size: 1.4em; }
    .safety-card .icon { font-style: normal; font-size: 1.5em; }
    .safety-card ul { list-style-type: '›'; padding-left: 20px; }
    .safety-card ul li { padding-left: 10px; margin-bottom: 10px; }
    .safety-card.personal-hygiene { border-left: 5px solid #3498db; }
    .safety-card.food-safety { border-left: 5px solid #f1c40f; }
    .safety-card.kitchen-cleanliness { border-left: 5px solid #2ecc71; }
    .safety-card.health-safety { border-left: 5px solid #e74c3c; }
    .fire-safety-section { margin-top: 40px; background-color: #2a2a2a; padding: 25px; border-radius: 8px; border-left: 5px solid #e67e22; }
    .fire-safety-section h3 { border-bottom-color: #e67e22; color: #e67e22; font-size: 1.6em; display: flex; align-items: center; gap: 10px; }
    .fire-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .fire-card { background-color: #333; padding: 15px; border-radius: 5px; }
    .fire-card h4 { margin: 0 0 10px 0; color: #FFD700; }
    @media (max-width: 768px) {
        .safety-grid, .fire-grid { grid-template-columns: 1fr; }
    }

    /* ---Certificate Styles --- */
    #certificate-container {
        display: none;
        margin-top: 30px;
        background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        color: #2c3e50;
        padding: 40px;
        border: 8px solid #FFD700;
        border-radius: 15px;
        font-family: 'Cormorant Garamond', serif;
        text-align: center;
        position: relative;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }

    /* Ornate corners using pseudo-elements */
    #certificate-container::before, #certificate-container::after,
    .certificate-body::before, .certificate-body::after {
        content: '';
        position: absolute;
        width: 50px;
        height: 50px;
        background-color: #c9a962;
        opacity: 0.6;
        clip-path: polygon(0 0, 100% 0, 100% 20%, 20% 20%, 20% 100%, 0 100%);
    }
    #certificate-container::before { top: 15px; left: 15px; }
    #certificate-container::after { top: 15px; right: 15px; transform: rotate(90deg); }
    .certificate-body::before { bottom: 15px; left: 15px; transform: rotate(270deg); }
    .certificate-body::after { bottom: 15px; right: 15px; transform: rotate(180deg); }


    .cert-logo {
        width: 120px;
        height: auto;
        margin: 0 auto 15px auto;
    }
    .certificate-title h2 {
        color: #2c3e50;
        border-bottom: 3px solid #FFD700;
        font-size: 2.5em;
        margin: 0 0 30px 0;
        font-family: 'Cormorant Garamond', serif;
        font-weight: 700;
        letter-spacing: 2px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .certificate-body p.award-text {
        font-size: 1.3em;
        color: #34495e;
        margin: 20px 0 15px 0;
        font-style: italic;
    }
    #cert-staff-name {
        font-size: 3.5em;
        font-weight: normal;
        color: #2c3e50;
        margin: 15px 0 25px 0;
        font-family: 'Great Vibes', cursive;
        border-bottom: 3px solid #FFD700;
        display: inline-block;
        padding: 0 40px 15px 40px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .certificate-body p.completion-text {
        font-size: 1.2em;
        color: #34495e;
        margin: 25px auto;
        max-width: 80%;
        line-height: 1.6;
    }

    .cert-modules-list {
        margin: 30px auto 0;
        max-width: 600px;
        text-align: left;
        font-size: 1em;
        color: #2c3e50;
        column-count: 2;
        column-gap: 50px;
        font-family: 'Segoe UI', Tahoma, sans-serif;
        font-size: 0.95em;
        background: rgba(255, 215, 0, 0.1);
        padding: 20px;
        border-radius: 10px;
        border: 2px solid rgba(255, 215, 0, 0.3);
    }
    .cert-modules-list p {
        margin: 8px 0;
        font-weight: 500;
    }

    .certificate-footer {
        display: flex;
        justify-content: space-around;
        margin-top: 40px;
        padding-top: 25px;
        border-top: 2px solid rgba(255, 215, 0, 0.5);
        font-size: 1.1em;
    }
    .footer-item {
        text-align: center;
        width: 40%;
    }
    .footer-item .label {
        display: block;
        font-weight: bold;
        font-size: 1em;
        color: #2c3e50;
        margin-bottom: 5px;
    }
    
    .footer-item .value {
        display: block;
        font-family: 'Cormorant Garamond', serif;
        margin-bottom: 8px;
        font-size: 1.2em;
        min-height: 1.2em;
        border-bottom: 2px solid #FFD700;
        padding-bottom: 5px;
        color: #34495e;
    }

    .print-btn-container { 
        text-align: center; 
        margin-top: 30px; 
    }
    
    .print-btn-container .btn {
        background: linear-gradient(135deg, #FFD700 0%, #e6b800 100%);
        color: #2c3e50;
        font-weight: bold;
        padding: 15px 30px;
        font-size: 1.1em;
        box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
    }

    @media print {
        body * { visibility: hidden; }
        #certificate-container, #certificate-container * { visibility: visible; }
        #certificate-container {
            position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 20px;
            border: 8px solid #FFD700;
            box-shadow: none;
        }
        .print-btn-container { display: none; }
    }
    
    footer { 
        text-align: center; 
        padding: 30px; 
        color: #94a3b8; 
        margin-top: 60px; 
        border-top: 1px solid rgba(99, 102, 241, 0.2);
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.8) 100%);
        backdrop-filter: blur(10px);
    }
    
    .page { display: none; }
    .active { display: block; }

    /* Login & Admin Styles */
    #login-page { 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        justify-content: center; 
        min-height: 100vh; 
        background: linear-gradient(rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.9)), 
                    url('https://picsum.photos/1920/1080?random=1') no-repeat center center fixed; 
        background-size: cover; 
    }
    
    .login-container { 
        display: flex; 
        gap: 40px; 
        flex-wrap: wrap; 
        justify-content: center; 
        width: 100%; 
        max-width: 1000px; 
    }
    
    .login-box { 
        background: linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(42, 42, 42, 0.95) 100%);
        padding: 40px; 
        border-radius: 16px; 
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5); 
        width: 380px; 
        text-align: center; 
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 215, 0, 0.3);
    }
    
    .login-box h2 { 
        margin-top: 0; 
        border-bottom: 2px solid #FFD700; 
        padding-bottom: 15px; 
        color: #FFD700;
        font-family: 'Poppins', sans-serif;
        font-weight: 600;
    }
    
    .login-box input { 
        width: calc(100% - 24px); 
        padding: 16px; 
        margin: 12px 0; 
        background: rgba(42, 42, 42, 0.8); 
        border: 1px solid rgba(255, 215, 0, 0.3); 
        color: #FFD700; 
        border-radius: 8px; 
        font-size: 1em;
        transition: all 0.3s ease;
    }
    
    .login-box input:focus {
        outline: none;
        border-color: #FFD700;
        box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
    }
    
    #login-error { 
        color: #ef4444; 
        margin-top: 20px; 
        font-weight: 600; 
        background: rgba(239, 68, 68, 0.1);
        padding: 12px;
        border-radius: 8px;
        border: 1px solid rgba(239, 68, 68, 0.3);
        display: none; /* Hide by default, only show when there's an error */
    }
    
    .admin-grid { 
        display: grid; 
        grid-template-columns: 1fr 2.5fr; 
        gap: 30px; 
    }
    
    .admin-section { 
        background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        padding: 30px; 
        border-radius: 16px; 
        border: 1px solid rgba(255, 215, 0, 0.2);
        backdrop-filter: blur(10px);
    }
    
    #staff-progress-table { 
        width: 100%; 
        border-collapse: collapse; 
        margin-top: 20px; 
        background: rgba(15, 23, 42, 0.5);
        border-radius: 12px;
        overflow: hidden;
    }
    
    #staff-progress-table th, #staff-progress-table td { 
        border: 1px solid rgba(99, 102, 241, 0.2); 
        padding: 16px; 
        text-align: left; 
    }
    
    #staff-progress-table th { 
        background: linear-gradient(135deg, rgba(255, 215, 0, 0.8) 0%, rgba(230, 184, 0, 0.8) 100%);
        color: #000000; 
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.9em;
    }
    
    #staff-progress-table td { 
        background: rgba(42, 42, 42, 0.5);
        color: #FFD700;
    }
    
    #staff-progress-table td input { 
        width: calc(100% - 16px); 
        margin: -8px; 
        padding: 8px; 
        background: rgba(26, 26, 26, 0.8); 
        border: 1px solid rgba(255, 215, 0, 0.3); 
        color: #FFD700; 
        border-radius: 6px;
    }
    
    .action-btn { 
        background: linear-gradient(135deg, #FFD700 0%, #e6b800 100%);
        color: #000000; 
        padding: 10px 16px; 
        font-size: 0.85em;
        margin-right: 8px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }
    
    .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
    }
    
    .action-btn.delete { 
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    }
    
    .admin-section input {
        width: calc(100% - 24px);
        padding: 14px;
        margin: 8px 0;
        background: rgba(42, 42, 42, 0.8);
        border: 1px solid rgba(255, 215, 0, 0.3);
        color: #FFD700;
        border-radius: 8px;
        font-size: 1em;
        transition: all 0.3s ease;
    }
    
    .admin-section input:focus {
        outline: none;
        border-color: #FFD700;
        box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
    }
    
    .admin-section label {
        color: #E0E0E0;
        font-weight: 500;
        margin-bottom: 8px;
        display: block;
    }
    
    #create-user-message {
        margin-top: 16px;
        padding: 12px;
        border-radius: 8px;
        font-weight: 500;
        text-align: center;
    }

    /* Staff Module & General Page Styles */
    .progress-bar-container { 
        background: linear-gradient(135deg, #333 0%, #444 100%);
        border-radius: 8px; 
        margin: 20px 0; 
        height: 30px; 
        padding: 4px; 
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        border: 1px solid rgba(255, 215, 0, 0.2);
    }
    
    .progress-bar { 
        background: linear-gradient(135deg, #008000 0%, #00aa00 100%);
        height: 100%; 
        width: 0%; 
        border-radius: 6px; 
        text-align: center; 
        line-height: 30px; 
        color: white; 
        font-weight: bold; 
        transition: width 0.8s ease-in-out; 
        font-size: 0.9em;
        box-shadow: 0 2px 8px rgba(0, 128, 0, 0.3);
        position: relative;
        overflow: hidden;
    }
    
    .progress-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        animation: progressShine 2s ease-in-out infinite;
    }
    
    @keyframes progressShine {
        0% { left: -100%; }
        100% { left: 100%; }
    }
    
    .module-nav { 
        margin-top: 30px; 
        padding-top: 20px; 
        border-top: 1px solid #444; 
        text-align: right; 
        display: flex; 
        justify-content: space-between;
        background: linear-gradient(135deg, rgba(26, 26, 26, 0.5) 0%, rgba(42, 42, 42, 0.5) 100%);
        padding: 20px;
        border-radius: 8px;
        backdrop-filter: blur(5px);
    }
    
    #welcome-message { 
        position: absolute; 
        right: 20px; 
        top: 50%; 
        transform: translateY(-50%); 
        font-size: 1.2em; 
        font-weight: bold; 
        color: #FFFFFF;
    }
    
    /* --- Styles for Menu Page --- */
    .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
    .menu-card { background-color: #2a2a2a; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
    .menu-card-image { width: 100%; height: 180px; object-fit: cover; }
    .menu-card-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; }
    .menu-card-header { display: flex; justify-content: space-between; align-items: flex-start; }
    .menu-card-header h4 { margin: 0; font-size: 1.3em; color: #FFFFFF; }
    .menu-card-header .price { font-size: 1.3em; font-weight: bold; color: #FFD700; }
    .menu-card-description { margin-top: 10px; color: #b0b0b0; flex-grow: 1; }
    .menu-card-footer { margin-top: 15px; border-top: 1px solid #444; padding-top: 10px; font-size: 0.9em; }
    .menu-card-footer span { display: block; margin-bottom: 5px; }
    .menu-card-footer strong { color: #FFD700; }

    /* Checklist Styles */
    .checklist-container { 
        background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
        border-radius: 12px; 
        padding: 25px; 
        margin-top: 30px; 
        border-left: 5px solid #FFD700;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(5px);
    }
    
    .checklist-container h3 { 
        margin-top: 0; 
        border-bottom: 2px solid #555;
    }
    
    .checklist-item { 
        display: flex; 
        align-items: center; 
        padding: 15px 0; 
        border-bottom: 1px solid #444;
        transition: all 0.3s ease;
        border-radius: 6px;
        margin: 5px 0;
    }
    
    .checklist-item:hover {
        background: rgba(255, 215, 0, 0.05);
        transform: translateX(5px);
    }
    
    .checklist-item:last-child { 
        border-bottom: none; 
    }
    
    .checklist-item input[type="checkbox"] { 
        width: 22px; 
        height: 22px; 
        margin-right: 15px; 
        cursor: pointer;
        accent-color: #FFD700;
        transform: scale(1.1);
        transition: all 0.3s ease;
    }
    
    .checklist-item input[type="checkbox"]:checked {
        transform: scale(1.2);
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }
    
    .checklist-item label { 
        font-size: 1.1em; 
        color: #E0E0E0; 
        cursor: pointer;
        transition: color 0.3s ease;
    }
    
    /* Bar Training Styles */
    .bar-training-content {
        margin: 20px 0;
    }
    
    .alcohol-categories {
        margin-bottom: 30px;
    }
    
    .beverage-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .beverage-card {
        background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
        padding: 20px;
        border-radius: 12px;
        border: 1px solid rgba(255, 215, 0, 0.2);
        transition: all 0.3s ease;
    }
    
    .beverage-card:hover {
        border-color: #FFD700;
        transform: translateY(-2px);
    }
    
    .beverage-card h4 {
        color: #FFD700;
        margin-top: 0;
        border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        padding-bottom: 10px;
    }
    
    .guidelines-grid, .pairing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .guideline-card, .pairing-card {
        background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid #FFD700;
    }
    
    .guideline-card h4, .pairing-card h4 {
        color: #FFD700;
        margin-top: 0;
    }
    
    /* Food Running Styles */
    .food-running-content {
        margin: 20px 0;
    }
    
    .steps-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .step-card {
        background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
        padding: 20px;
        border-radius: 12px;
        border: 1px solid rgba(255, 215, 0, 0.2);
        display: flex;
        align-items: flex-start;
        gap: 15px;
        transition: all 0.3s ease;
    }
    
    .step-card:hover {
        border-color: #FFD700;
        transform: translateY(-2px);
    }
    
    .step-number {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        color: #000;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2em;
        flex-shrink: 0;
    }
    
    .step-content h4 {
        color: #FFD700;
        margin-top: 0;
        margin-bottom: 10px;
    }
    
    .technique-grid, .greeting-examples, .challenge-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .technique-card, .greeting-card, .challenge-card {
        background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid #FFD700;
    }
    
    .technique-card h4, .greeting-card h4, .challenge-card h4 {
        color: #FFD700;
        margin-top: 0;
    }
    
    .greeting-card p {
        margin: 10px 0;
    }
    
    .greeting-card p strong {
        color: #FFD700;
    }
    
    .checklist-item input[type="checkbox"]:checked + label {
        color: #FFD700;
    }
    @media (max-width: 768px) { #welcome-message { display: none; } }
  </style>
</head>
<body>

  <section id="login-page" class="active">
    <div class="logo-container">
      <img src="LOGO3-2366784072.png" alt="Yatri Indian Restaurant Logo" class="logo">
    </div>
    <div class="login-container">
      <div class="login-box">
        <h2>Admin Login</h2>
        <form id="admin-login-form">
          <input type="text" id="admin-id" placeholder="Admin ID" required autocomplete="new-password">
          <input type="password" id="admin-password" placeholder="Password" required autocomplete="new-password">
          <button type="submit" class="btn">Login as Admin</button>
        </form>
      </div>
      <div class="login-box">
        <h2>Staff Login</h2>
        <form id="staff-login-form">
          <input type="text" id="staff-id" placeholder="Staff ID" required autocomplete="new-password">
          <input type="password" id="staff-password" placeholder="Password" required autocomplete="new-password">
          <button type="submit" class="btn">Login as Staff</button>
        </form>
      </div>
    </div>
    <p id="login-error"></p>
  </section>

  <section id="training-module" style="display: none;">
    <header>
      <img src="LOGO3-2366784072.png" alt="Logo" class="header-logo">
      <h1>YATRI Staff Training Module</h1>
      <p id="welcome-message"></p>
      <a href="#" onclick="logout()" class="btn" style="position: absolute; top: 20px; right: 20px; background-color: #ff4d4d;">Logout</a>
    </header>
    
    <div class="container">
      <section id="module-hub" class="page active">
        <h2>Training Modules</h2>
        <p>Please select a module to begin. Complete all modules to unlock the Final Assessment.</p>
        <div class="progress-bar-container">
            <div id="staff-progress-bar" class="progress-bar">0%</div>
        </div>
        <div id="module-grid-container">
            </div>
      </section>

      <section id="welcome" class="page" data-module-index="0">
        <div class="welcome-hero">
            <h2>Welcome to the Yatri Family</h2>
            <p>We’re delighted you’re joining us. Yatri isn’t just about food; it's about an experience. Our customers come for the flavours, but they return for the hospitality you provide.</p>
        </div>
        <div class="welcome-content">
            <div class="welcome-story slide-in-left">
                <div class="welcome-story-text">
                    <h3>The Founders' Journey</h3>
                    <p>Yatri was born from a shared dream between three friends from India: Prashant, Vikram, and Hemant. They envisioned a place in the heart of London that wasn't just a restaurant, but a true destination—a bridge between the vibrant, diverse culture of their homeland and the bustling energy of this city. After years of meticulous planning, that dream became a reality near King's Cross, a place where every guest is treated as an honoured traveller.</p>
                </div>
                <img src="photoshoot_for_tadka_holland_park_hero_1_550x440.jpg" alt="Restaurant Interior" class="welcome-story-image floating-animation">
            </div>
            <div class="welcome-mission slide-in-right">
                <img src="photoshoot_for_tadka_holland_park_chicken_tikka_makhani_550x440.jpg" alt="Indian Cuisine" class="welcome-mission-image pulse-animation">
                <div class="welcome-mission-text">
                    <h3>Mission & Vision</h3>
                    <p>Our mission is to serve delicious, authentic Indian dishes in a welcoming, clean, and respectful environment. We aim to be renowned not just for our exceptional food, but for our excellence in service, ensuring every guest leaves happy and eager to return or recommend us.</p>
                </div>
            </div>
            <div class="welcome-values fade-in-up">
                <h3>Our Core Values</h3>
                <div class="values-grid">
                    <div class="value-card interactive-card">
                        <h4>🏠 Hospitality & Respect</h4>
                        <p>Treat every guest as if they were an honoured guest in your own home.</p>
                    </div>
                    <div class="value-card interactive-card">
                        <h4>⭐ Uncompromising Quality</h4>
                        <p>From the freshest ingredients to the final presentation, excellence is our standard.</p>
                    </div>
                    <div class="value-card interactive-card">
                        <h4>🤝 Unified Teamwork</h4>
                        <p>We succeed together. Every role, from the kitchen to the front, is essential.</p>
                    </div>
                    <div class="value-card interactive-card">
                        <h4>🛡️ Safety & Cleanliness</h4>
                        <p>A non-negotiable foundation for the well-being of our guests and staff.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>
      
      <section id="responsibilities" class="page" data-module-index="1">
        <div class="responsibilities-intro">
            <h2>Role Summary: The Heart of Yatri</h2>
            <p>Our floor teams get a thrill from putting a smile on someone’s face. Key to success is your ability to learn about and engage our guests in our flavours and experience. You will deliver a fast, friendly, and memorable service every time.</p>
        </div>
        <div class="tabs-container">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="openTab(event, 'guest-experience')">Guest Experience</button>
                <button class="tab-button" onclick="openTab(event, 'product-knowledge')">Product Knowledge</button>
                <button class="tab-button" onclick="openTab(event, 'operations')">Team & Operations</button>
                <button class="tab-button" onclick="openTab(event, 'professionalism')">Professionalism</button>
            </div>
            
            <div id="guest-experience" class="tab-content active">
                <h3>Creating the Perfect Experience</h3>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-1-1" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-1-1">Deliver the perfect dining experience by applying the brand steps of service with personality.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-1-2" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-1-2">Create a great atmosphere for our guests, using your team spirit to create a fun and homely place to be.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-1-3" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-1-3">Listen and seek to understand our customers and serve them accordingly.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-1-4" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-1-4">Proactively upsell and recommend dishes, promoting specials and offers to enhance the guest's meal.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-1-5" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-1-5">Understand and uphold the ‘Guest Allergy’ steps of service to protect diners.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-1-6" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-1-6">Seek guest feedback at all opportunities and learn from what is shared.</label>
                </div>
            </div>

            <div id="product-knowledge" class="tab-content">
                <h3>Knowing Our Craft</h3>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-2-1" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-2-1">Know the ingredients, cooking methods, and presentation of all our food and beverage products.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-2-2" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-2-2">Ensure quality food and drink is produced and served to specification at all times.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-2-3" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-2-3">When required, prepare food and/or drink as per the company specification.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-2-4" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-2-4">Advise customers on suitable dishes, recognising their unique wishes and dietary needs.</label>
                </div>
            </div>

            <div id="operations" class="tab-content">
                <h3>Working Together Seamlessly</h3>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-3-1" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-3-1">Partner with the kitchen team to deliver perfect service, sharing customer feedback and menu availability.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-3-2" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-3-2">Perform all opening, running, and closing duties assigned to you during your shift.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-3-3" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-3-3">Prepare the restaurant to the required standard before, during, and after service.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-3-4" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-3-4">Maintain a clean and safe working environment, reporting any hazards or maintenance issues promptly.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-3-5" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-3-5">Proficiently use the point of sale (tills) and uphold all cash handling processes.</label>
                </div>
            </div>

            <div id="professionalism" class="tab-content">
                <h3>Being a Yatri Ambassador</h3>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-4-1" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-4-1">Project a positive, friendly, and professional image to our customers and colleagues.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-4-2" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-4-2">Act as a role model to your colleagues, displaying a high level of professionalism at all times.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-4-3" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-4-3">Complete all required training and uphold company brand standards.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-4-4" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-4-4">Where required, mentor and coach colleagues, actively contributing to their success.</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="resp-check-4-5" onchange="handleCheckboxChange(1)">
                    <label for="resp-check-4-5">Support any other areas of the restaurant and business as required.</label>
                </div>
            </div>
        </div>
        <div class="spec-section">
            <h3>Who We Look For: The Person Specification</h3>
            <div class="spec-grid">
                <div class="spec-card"><h4>A Natural Host</h4><p>Relishes in making people feel welcome and cared for.</p></div>
                <div class="spec-card"><h4>Knowledgeable</h4><p>Passionate about our food, drink, and the stories behind them.</p></div>
                <div class="spec-card"><h4>Organised & Efficient</h4><p>Able to perform duties with speed and precision, especially during busy periods.</p></div>
                <div class="spec-card"><h4>Excellent Communicator</h4><p>Well-presented with a great level of spoken English to connect with guests and the team.</p></div>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>

      <section id="steps_service" class="page" data-module-index="2">
        <h2>The Yatri Steps of Service</h2>
        <p>This is our blueprint for creating a consistent, high-quality guest experience from the moment someone arrives until they depart. Following these steps ensures every guest feels welcomed, valued, and cared for.</p>
        <div class="service-steps-container">
            <div class="service-step">
                <div class="step-number">1</div>
                <div class="step-details">
                    <h3>Greeting & Arrival</h3>
                    <p class="action">Guest enters the restaurant.</p>
                    <p class="key-points">Provide a warm, instant welcome (“Namaste,” “Good evening”). Smile, show them to their table, and offer water and menus quickly to make them comfortable.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">2</div>
                <div class="step-details">
                    <h3>Allergies & Drinks</h3>
                    <p class="action">Present the menu and take drink orders.</p>
                    <p class="key-points">Be knowledgeable about specials. Crucially, always ask guests if they have any allergies or dietary requirements before they order.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">3</div>
                <div class="step-details">
                    <h3>Taking the Order</h3>
                    <p class="action">Take the food order.</p>
                    <p class="key-points">Repeat the order back to confirm accuracy. Clearly mark any allergies or special requests. Suggest appetizers or accompaniments to enhance their meal.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">4</div>
                <div class="step-details">
                    <h3>First Service</h3>
                    <p class="action">Serve drinks and starters.</p>
                    <p class="key-points">Ensure the order is correct, the presentation is perfect, and the timing is right. Drinks should arrive promptly, followed by starters.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">5</div>
                <div class="step-details">
                    <h3>Main Course Service</h3>
                    <p class="action">Serve the main dishes.</p>
                    <p class="key-points">Serve hot food promptly. Check that all ordered items are present. Anticipate guest needs, such as additional sauces or condiments.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">6</div>
                <div class="step-details">
                    <h3>Mid-Meal Check</h3>
                    <p class="action">Check on the guests during their meal.</p>
                    <p class="key-points">Visit the table to ask how everything is. Respond to any additional requests and clear away finished plates to maintain a tidy table.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">7</div>
                <div class="step-details">
                    <h3>Dessert & After-Meal Drinks</h3>
                    <p class="action">Offer dessert, tea, or coffee.</p>
                    <p class="key-points">Be proactive without being pushy. A suggestion for a dessert or a warm drink can perfectly round off their meal.</p>
                </div>
            </div>
            <div class="service-step">
                <div class="step-number">8</div>
                <div class="step-details">
                    <h3>Bill & Farewell</h3>
                    <p class="action">Present the final bill and say goodbye.</p>
                    <p class="key-points">Handle the payment process discreetly and efficiently. Thank the guests sincerely and invite them to return, leaving a positive lasting impression.</p>
                </div>
            </div>
        </div>
        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="service-check-1" onchange="handleCheckboxChange(2)">
                <label for="service-check-1">I will always greet guests warmly and ask about allergies early in the process.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="service-check-2" onchange="handleCheckboxChange(2)">
                <label for="service-check-2">I will confirm orders and anticipate guest needs throughout the meal, including a mid-meal check.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="service-check-3" onchange="handleCheckboxChange(2)">
                <label for="service-check-3">I understand the importance of a sincere farewell to leave a positive lasting impression.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>
        
      <section id="menu" class="page" data-module-index="3">
        <h2>Our Menu: The Heart of Yatri</h2>
        <p>Thorough menu knowledge is essential. You must understand the ingredients, cooking methods, and flavour profiles to guide our guests on their culinary journey.</p>
        
        <!-- Interactive Menu Video -->
        
        <h3>Small Plates</h3>
        <div class="menu-grid">
            <div class="menu-card"><img src="photoshoot_for_tadka_holland_park_hero_1_550x440.jpg" class="menu-card-image" alt="Bhel Puri Chaat"><div class="menu-card-content"><div class="menu-card-header"><h4>Bhel Puri Chaat (Vegan)</h4><span class="price">£8</span></div><p class="menu-card-description">Puffed rice tossed with onion, chickpeas & a variety of chutneys.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh coriander, sev (crispy noodles)</span><span><strong>Portion Size:</strong> Starter for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Paneer+Kali+Mirch" class="menu-card-image" alt="Paneer Kali Mirch"><div class="menu-card-content"><div class="menu-card-header"><h4>Paneer Kali Mirch (V)</h4><span class="price">£9</span></div><p class="menu-card-description">Indian cheese marinated in home ground spices & cooked in a tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lemon wedge, mint chutney</span><span><strong>Portion Size:</strong> 4-5 cubes</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Samosa+Chaat" class="menu-card-image" alt="Samosa Chaat"><div class="menu-card-content"><div class="menu-card-header"><h4>Samosa Chaat (V)</h4><span class="price">£9</span></div><p class="menu-card-description">Lip smacking chaat made with variety of chutneys.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Yoghurt, tamarind & mint chutney, sev</span><span><strong>Portion Size:</strong> Starter for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Vegetable+Samosa" class="menu-card-image" alt="Vegetable Samosa"><div class="menu-card-content"><div class="menu-card-header"><h4>Vegetable Samosa (V)</h4><span class="price">£7</span></div><p class="menu-card-description">Served with homemade chutneys.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Tamarind chutney on the side</span><span><strong>Portion Size:</strong> Two pieces</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Chilli+Paneer" class="menu-card-image" alt="Chilli Paneer"><div class="menu-card-content"><div class="menu-card-header"><h4>Chilli Paneer (V)</h4><span class="price">£10</span></div><p class="menu-card-description">Crispy paneer tossed in a spicy Indo-Chinese sauce — a bold fusion of flavour and heat.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Spring onions, sliced peppers</span><span><strong>Portion Size:</strong> Starter for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Onion+Bhaji" class="menu-card-image" alt="Onion Bhaji"><div class="menu-card-content"><div class="menu-card-header"><h4>Onion Bhaji (V)</h4><span class="price">£7</span></div><p class="menu-card-description">Crispy onion fritters. (Coated in gram flour, mixed with onions & spices.)</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lemon wedge, mint chutney</span><span><strong>Portion Size:</strong> 3-4 pieces</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Lamb+Samosa" class="menu-card-image" alt="Lamb Samosa"><div class="menu-card-content"><div class="menu-card-header"><h4>Lamb Samosa</h4><span class="price">£8</span></div><p class="menu-card-description">Spiced up minced lamb filling in a crispy samosa pastry served with chutneys.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Mint chutney on the side</span><span><strong>Portion Size:</strong> Two pieces</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Chicken+Tikka" class="menu-card-image" alt="Yatri’s Chicken Tikka"><div class="menu-card-content"><div class="menu-card-header"><h4>Yatri’s Chicken Tikka</h4><span class="price">£9</span></div><p class="menu-card-description">Using a family recipe, chicken marinated & cooked in a tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Coriander, lemon wedge</span><span><strong>Portion Size:</strong> 4-5 pieces</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Sheekh+Kabab" class="menu-card-image" alt="Nilgiri Sheekh Kabab"><div class="menu-card-content"><div class="menu-card-header"><h4>Nilgiri Sheekh Kabab</h4><span class="price">£10</span></div><p class="menu-card-description">(Minced lamb with kabab) Cooked in a tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Mint chutney, onion rings</span><span><strong>Portion Size:</strong> Two skewers</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Lamb+Chops" class="menu-card-image" alt="Dhaniya Adaraki Champ"><div class="menu-card-content"><div class="menu-card-header"><h4>Dhaniya Adaraki Champ</h4><span class="price">£11</span></div><p class="menu-card-description">Lamb chops marinated with coriander & ginger and cooked in a tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh ginger strips, coriander</span><span><strong>Portion Size:</strong> 2-3 chops</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Macchi+Tikka" class="menu-card-image" alt="Macchi Tikka"><div class="menu-card-content"><div class="menu-card-header"><h4>Macchi Tikka</h4><span class="price">£10</span></div><p class="menu-card-description">Fish is called Macchi in India. Tilapia marinated & cooked in tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lemon wedge, salad</span><span><strong>Portion Size:</strong> 2-3 pieces</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Fish+Pakora" class="menu-card-image" alt="Fish Pakora"><div class="menu-card-content"><div class="menu-card-header"><h4>Fish Pakora</h4><span class="price">£10</span></div><p class="menu-card-description">Spiced Gram flour battered Tilapia fish.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Chaat masala sprinkle, lemon</span><span><strong>Portion Size:</strong> 4-5 pieces</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Tandoori+Prawns" class="menu-card-image" alt="Tandoori Prawns"><div class="menu-card-content"><div class="menu-card-header"><h4>Tandoori Prawns</h4><span class="price">£10</span></div><p class="menu-card-description">Prawns delicately marinated in yoghurt and spices, cooked in a tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lemon wedge, salad</span><span><strong>Portion Size:</strong> 4-5 prawns</span></div></div></div>
        </div>

        <h3 style="margin-top: 40px;">Curry Dishes</h3>
        <div class="menu-grid">
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Chicken+Makhani" class="menu-card-image" alt="Chicken Tikka Makhani"><div class="menu-card-content"><div class="menu-card-header"><h4>Chicken Tikka Makhani</h4><span class="price">£13</span></div><p class="menu-card-description">Tandoori chicken in a creamy butter sauce.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Swirl of cream, kasuri methi (fenugreek leaves)</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Bombay+Chicken" class="menu-card-image" alt="Bombay Chicken Curry"><div class="menu-card-content"><div class="menu-card-header"><h4>Bombay Chicken Curry</h4><span class="price">£13</span></div><p class="menu-card-description">A must try for spicy curry lovers. Chicken cooked in a traditional street style curry sauce.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Ginger strips and coriander</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Keralian+Curry" class="menu-card-image" alt="Keralian Fish or Prawn Curry"><div class="menu-card-content"><div class="menu-card-header"><h4>Keralian Fish or Prawn Curry</h4><span class="price">£14</span></div><p class="menu-card-description">Delicate Tilapia / Prawn cooked in a coconut-based south Indian style curry.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Curry leaves, mustard seeds</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Kadhai+Lamb" class="menu-card-image" alt="Mughlai Kadhai Lamb"><div class="menu-card-content"><div class="menu-card-header"><h4>Mughlai Kadhai Lamb</h4><span class="price">£14</span></div><p class="menu-card-description">Slow cooked lamb with tomatoes, garlic & garam masala.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Sliced peppers, fresh coriander</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Lamb+Hari+Mirch" class="menu-card-image" alt="Lamb Hari Mirch"><div class="menu-card-content"><div class="menu-card-header"><h4>Lamb Hari Mirch</h4><span class="price">£14</span></div><p class="menu-card-description">Slow cooked lamb chunks with fresh green chillies & garlic in a tomato-based sauce.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh green chillies, coriander</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Tofu+Tawa+Masala" class="menu-card-image" alt="Tofu Tawa Masala"><div class="menu-card-content"><div class="menu-card-header"><h4>Tofu Tawa Masala (Vegan)</h4><span class="price">£12</span></div><p class="menu-card-description">Tofu cooked on a Tawa (flat pan) with rustic masala curry sauce.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Sliced onions and peppers</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Paneer+Butter+Masala" class="menu-card-image" alt="Paneer Butter Masala"><div class="menu-card-content"><div class="menu-card-header"><h4>Paneer Butter Masala (V)</h4><span class="price">£13</span></div><p class="menu-card-description">What if I told you “Paneer Butter Masala” is both the name of the dish and ingredients!</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Swirl of cream, kasuri methi</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Baigan+Bartha" class="menu-card-image" alt="Baigan Bartha"><div class="menu-card-content"><div class="menu-card-header"><h4>Baigan Bartha (Vegan)</h4><span class="price">£12</span></div><p class="menu-card-description">Tandoor roasted aubergine curry with green onion, peas and tomatoes.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh coriander, ginger strips</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Korma" class="menu-card-image" alt="Korma your Way"><div class="menu-card-content"><div class="menu-card-header"><h4>Korma your Way</h4><span class="price">£13</span></div><p class="menu-card-description">Chicken or Paneer cooked in a korma sauce.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Flaked almonds, cream</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Lasooni+Palak" class="menu-card-image" alt="Lasooni Palak Paneer or Chicken"><div class="menu-card-content"><div class="menu-card-header"><h4>Lasooni Palak Paneer or Chicken</h4><span class="price">£13</span></div><p class="menu-card-description">Tender Paneer or Chicken cooked with spinach & tempered with fresh Garlic.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fried garlic slices</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Bhindi+Corn+Masala" class="menu-card-image" alt="Bhindi Corn Masala"><div class="menu-card-content"><div class="menu-card-header"><h4>Bhindi Corn Masala (V)</h4><span class="price">£13</span></div><p class="menu-card-description">Okra, Corn, Onion, Tomatoes stir fried With ground masala.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh coriander</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Bombay+Aloo" class="menu-card-image" alt="Bombay Aloo"><div class="menu-card-content"><div class="menu-card-header"><h4>Bombay Aloo (V)</h4><span class="price">£9</span></div><p class="menu-card-description">Potato pieces tossed with cumin seeds, nuts, ginger, peanuts & coriander.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh coriander</span><span><strong>Portion Size:</strong> Side dish for sharing</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Railway+Chicken" class="menu-card-image" alt="Railway Chicken Curry"><div class="menu-card-content"><div class="menu-card-header"><h4>Railway Chicken Curry</h4><span class="price">£14</span></div><p class="menu-card-description">Tender chicken pieces cooked in a delicious curry with potato and a boiled egg. A British-era classic.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Boiled egg half, coriander</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Gujarati+Undhiyu" class="menu-card-image" alt="Chef Special Gujarati Undhiyu"><div class="menu-card-content"><div class="menu-card-header"><h4>Chef Special Gujarati Undhiyu (V)</h4><span class="price">£13</span></div><p class="menu-card-description">A traditional Gujarati mixed vegetable dish, slow-cooked upside down in earthen pots.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fresh coriander, sev</span><span><strong>Portion Size:</strong> Main course for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Dal+Tadkewali" class="menu-card-image" alt="Dal Tadkewali"><div class="menu-card-content"><div class="menu-card-header"><h4>Dal Tadkewali (Vegan)</h4><span class="price">£9</span></div><p class="menu-card-description">A staple in every Indian household. Yellow lentils tempered with chillies, garlic, and onion.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fried red chillies, coriander</span><span><strong>Portion Size:</strong> Side dish for sharing</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Black+Dal" class="menu-card-image" alt="Black Dal"><div class="menu-card-content"><div class="menu-card-header"><h4>Black Dal (V)</h4><span class="price">£10</span></div><p class="menu-card-description">The ultimate comfort food. Black lentils slow cooked for hours for a rich and creamy texture.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> A knob of butter, swirl of cream</span><span><strong>Portion Size:</strong> Side dish for sharing</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Dal+Palak" class="menu-card-image" alt="Dal Palak"><div class="menu-card-content"><div class="menu-card-header"><h4>Dal Palak (V)</h4><span class="price">£10</span></div><p class="menu-card-description">Protein packed lentils with Spinach & Garlic.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fried garlic slices</span><span><strong>Portion Size:</strong> Side dish for sharing</span></div></div></div>
        </div>
        
        <h3 style="margin-top: 40px;">Sides & Bites</h3>
        <div class="menu-grid">
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Papadums" class="menu-card-image" alt="Basket of Papadums"><div class="menu-card-content"><div class="menu-card-header"><h4>Basket of Papadums</h4><span class="price">£5</span></div><p class="menu-card-description">Served with a variety of homemade chutneys.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Served with mango chutney, mint raita, and mixed pickle</span><span><strong>Portion Size:</strong> Sharer for 2-3 people</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Potato+Chips" class="menu-card-image" alt="Potato Chips"><div class="menu-card-content"><div class="menu-card-header"><h4>Potato Chips</h4><span class="price">£4</span></div><p class="menu-card-description">Classic crispy potato chips.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lightly salted</span><span><strong>Portion Size:</strong> Single portion</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Kachumber+Salad" class="menu-card-image" alt="Kachumber Salad"><div class="menu-card-content"><div class="menu-card-header"><h4>Kachumber Salad</h4><span class="price">£3</span></div><p class="menu-card-description">Chopped onions, tomatoes, carrot, and cucumber with green chillies.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lemon juice, coriander</span><span><strong>Portion Size:</strong> Side salad</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Cucumber+Raita" class="menu-card-image" alt="Cucumber Raita"><div class="menu-card-content"><div class="menu-card-header"><h4>Cucumber Raita</h4><span class="price">£3</span></div><p class="menu-card-description">Cooling yoghurt dip with grated cucumber and roasted cumin.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Sprinkle of cumin powder</span><span><strong>Portion Size:</strong> Small bowl for sharing</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Red+Onion+Salad" class="menu-card-image" alt="Red onion laccha salad"><div class="menu-card-content"><div class="menu-card-header"><h4>Red Onion Laccha Salad</h4><span class="price">£3</span></div><p class="menu-card-description">Simple salad of sliced red onions with seasoning.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lemon wedge, green chillies</span><span><strong>Portion Size:</strong> Side salad</span></div></div></div>
        </div>

        <h3 style="margin-top: 40px;">Bread & Rice</h3>
        <div class="menu-grid">
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Plain+Naan" class="menu-card-image" alt="Plain Naan"><div class="menu-card-content"><div class="menu-card-header"><h4>Plain Naan (Vegan)</h4><span class="price">£3.50</span></div><p class="menu-card-description">Freshly baked in a tandoor.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> None</span><span><strong>Portion Size:</strong> One piece</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Butter+Naan" class="menu-card-image" alt="Butter Naan"><div class="menu-card-content"><div class="menu-card-header"><h4>Butter Naan (V)</h4><span class="price">£3.50</span></div><p class="menu-card-description">Freshly baked in a tandoor and brushed with butter.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Melted butter</span><span><strong>Portion Size:</strong> One piece</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Garlic+Naan" class="menu-card-image" alt="Garlic Naan"><div class="menu-card-content"><div class="menu-card-header"><h4>Garlic Naan (V)</h4><span class="price">£4.50</span></div><p class="menu-card-description">Naan with finely chopped garlic and fresh coriander.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Butter, chopped coriander</span><span><strong>Portion Size:</strong> One piece</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Chilli+Garlic+Naan" class="menu-card-image" alt="Garlic & Chilli Naan"><div class="menu-card-content"><div class="menu-card-header"><h4>Garlic & Chilli Naan (V)</h4><span class="price">£4.50</span></div><p class="menu-card-description">Naan with finely chopped garlic, chillies, and fresh coriander.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Butter, chopped chillies & coriander</span><span><strong>Portion Size:</strong> One piece</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Peshawari+Naan" class="menu-card-image" alt="Peshawari Naan"><div class="menu-card-content"><div class="menu-card-header"><h4>Peshawari Naan (V)</h4><span class="price">£4.50</span></div><p class="menu-card-description">Naan bread stuffed with mixed nuts and finely grated coconut.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lightly brushed with butter</span><span><strong>Portion Size:</strong> One piece</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Cheese+Naan" class="menu-card-image" alt="Cheese Naan"><div class="menu-card-content"><div class="menu-card-header"><h4>Cheese Naan (V)</h4><span class="price">£4.50</span></div><p class="menu-card-description">Baked naan bread filled with grated cheddar & mozzarella cheese.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Lightly brushed with butter</span><span><strong>Portion Size:</strong> One piece</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Yatri%27s+Biryani" class="menu-card-image" alt="Yatri’s Biryani"><div class="menu-card-content"><div class="menu-card-header"><h4>Yatri’s Biryani</h4><span class="price">£14</span></div><p class="menu-card-description">A choice of chicken, Lamb or mixed vegetables Biryani served with a Raita.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fried onions, mint leaves</span><span><strong>Portion Size:</strong> Full meal for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Steamed+Rice" class="menu-card-image" alt="Steamed Basmati Rice"><div class="menu-card-content"><div class="menu-card-header"><h4>Steamed Basmati Rice (V)</h4><span class="price">£4.50</span></div><p class="menu-card-description">Plain steamed basmati rice.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> None</span><span><strong>Portion Size:</strong> Single portion</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Jeera+Rice" class="menu-card-image" alt="Jeera Rice"><div class="menu-card-content"><div class="menu-card-header"><h4>Jeera Rice (V)</h4><span class="price">£4.50</span></div><p class="menu-card-description">Cumin tempered rice.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fried cumin seeds, coriander</span><span><strong>Portion Size:</strong> Single portion</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Mushroom+Rice" class="menu-card-image" alt="Mushroom Rice"><div class="menu-card-content"><div class="menu-card-header"><h4>Mushroom Rice (V)</h4><span class="price">£8</span></div><p class="menu-card-description">Basmati rice stir-fried with mushrooms and light spices.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Fried onions, coriander</span><span><strong>Portion Size:</strong> Sharer side or main for one</span></div></div></div>
            <div class="menu-card"><img src="https://placehold.co/400x250/1a1a1a/FFD700?text=Egg+Fried+Rice" class="menu-card-image" alt="Egg Fried Rice"><div class="menu-card-content"><div class="menu-card-header"><h4>Egg Fried Rice</h4><span class="price">£8</span></div><p class="menu-card-description">Basmati rice stir-fried with egg and seasoning.</p><div class="menu-card-footer"><span><strong>Garnish:</strong> Spring onions</span><span><strong>Portion Size:</strong> Sharer side or main for one</span></div></div></div>
        </div>
        
        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="menu-check-1" onchange="handleCheckboxChange(3)">
                <label for="menu-check-1">I have reviewed all the Small Plates and Curry Dishes.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="menu-check-2" onchange="handleCheckboxChange(3)">
                <label for="menu-check-2">I will learn the key ingredients, garnish, and portion sizes for these items.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="menu-check-3" onchange="handleCheckboxChange(3)">
                <label for="menu-check-3">I am ready to proceed to the next section of the menu.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>
        
      <section id="uniform" class="page" data-module-index="4">
        <h2>Uniform & Grooming Standards</h2>
        <p>Our appearance is a reflection of our brand's quality and professionalism. Adhering to these standards ensures we present a consistent and positive image to our guests at all times.</p>
        
        <div class="uniform-layout">
            <div class="uniform-image-container">
                <img src="unnamed.png" alt="Yatri Staff Uniform">
            </div>
            <div class="uniform-details">
                <div class="uniform-category">
                    <h3>Uniform Standards</h3>
                    <ul>
                        <li>All uniform items (shirt/blouse, trousers/skirt, apron, shoes) must be worn as specified.</li>
                        <li>Clothing must be clean, ironed, and in good repair at all times. No stains or holes.</li>
                        <li>Shoes must be closed-toe and have slip-resistant soles.</li>
                        <li>Your name badge must be clean and clearly visible.</li>
                    </ul>
                </div>
                <div class="uniform-category">
                    <h3>Personal Hygiene</h3>
                    <ul>
                        <li>Hands must be kept clean with trimmed nails. No chipped nail polish.</li>
                        <li>Hair must be clean and tied back or contained neatly. Beards must be clean and well-groomed.</li>
                        <li>Jewellery must be minimal (e.g., small stud earrings, a wedding band). No dangling items.</li>
                        <li>Fragrance and makeup should be minimal and natural so as not to interfere with the aroma of the food.</li>
                    </ul>
                </div>
                 <div class="uniform-category">
                    <h3>Uniform Care</h3>
                    <ul>
                        <li>It is your responsibility to launder your uniform items regularly.</li>
                        <li>Promptly report and replace any worn or damaged uniform items.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="uniform-check-1" onchange="handleCheckboxChange(4)">
                <label for="uniform-check-1">I will arrive for every shift in a clean, ironed, and complete uniform.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="uniform-check-2" onchange="handleCheckboxChange(4)">
                <label for="uniform-check-2">I will adhere to all personal hygiene standards, including hair, hands, and jewellery.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="uniform-check-3" onchange="handleCheckboxChange(4)">
                <label for="uniform-check-3">I understand it is my responsibility to care for and maintain my uniform.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>

      <section id="allergen" class="page" data-module-index="5">
        <h2>Allergen Awareness & Management</h2>
        <p>Guest safety is our highest priority. Understanding and managing allergens is a non-negotiable part of your role. A mistake can have severe consequences, so this module is one of the most important in your training.</p>
        
        <div class="allergen-main-content">
            <div class="allergen-left-col">
                <h3>The 14 Major Allergens</h3>
                <p>According to UK regulations, you must be able to identify the following 14 allergens. Review each one carefully.</p>
                
                <div class="allergen-columns">
                    <div class="allergen-column">
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=center" alt="Celery"><span>Celery</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=100&h=100&fit=crop&crop=center" alt="Cereals containing Gluten"><span>Gluten</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1559847844-5315695dadae?w=100&h=100&fit=crop&crop=center" alt="Crustaceans"><span>Crustaceans</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1518569656558-1f25e69d93d7?w=100&h=100&fit=crop&crop=center" alt="Eggs"><span>Eggs</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=100&h=100&fit=crop&crop=center" alt="Fish"><span>Fish</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=center" alt="Lupin"><span>Lupin</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1550583724-b2692b85b150?w=100&h=100&fit=crop&crop=center" alt="Milk"><span>Milk</span></div>
                    </div>
                    <div class="allergen-column">
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1559847844-5315695dadae?w=100&h=100&fit=crop&crop=center" alt="Molluscs"><span>Molluscs</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=center" alt="Mustard"><span>Mustard</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=100&h=100&fit=crop&crop=center" alt="Tree Nuts"><span>Tree Nuts</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=100&h=100&fit=crop&crop=center" alt="Peanuts"><span>Peanuts</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=center" alt="Sesame Seeds"><span>Sesame</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=center" alt="Soya"><span>Soya</span></div>
                        <div class="allergen-item"><img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=center" alt="Sulphur Dioxide"><span>Sulphites</span></div>
                    </div>
                </div>
            </div>
            <div class="allergen-right-col">
                <h3>Guest Allergy Protocol</h3>
                
                <!-- Interactive Video Section -->
                <div class="video-section">
                    <h4>📹 Understanding Allergies - Training Video</h4>
                    <div class="video-container">
                        <iframe width="100%" height="200" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Allergy Training Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                    <p class="video-description">Watch this comprehensive video to understand allergen management and emergency procedures.</p>
                </div>
                
                <div class="protocol-step">
                    <h4><span>1</span>ASK & LISTEN</h4>
                    <p>When taking the order, **always ask**: "Does anyone have any allergies or dietary requirements?"</p>
                </div>
                 <div class="protocol-step">
                    <h4><span>2</span>RECORD & CONFIRM</h4>
                    <p>Clearly write the allergy on the order. Repeat it back to the guest to confirm.</p>
                </div>
                 <div class="protocol-step">
                    <h4><span>3</span>COMMUNICATE</h4>
                    <p>Verbally inform the manager and the chef. Ensure the allergy is clearly marked on the kitchen ticket.</p>
                </div>
                 <div class="protocol-step">
                    <h4><span>4</span>DELIVER SAFELY</h4>
                    <p>When the dish arrives, confirm with the chef it is the allergen-safe meal. Announce the dish to the guest who ordered it.</p>
                </div>
                <div class="emergency-protocol">
                    <h3>Emergency: Allergic Reaction</h3>
                    <ol>
                        <li><strong>Stay Calm & Alert Manager.</strong> Do not leave the guest.</li>
                        <li><strong>Call 999 Immediately.</strong> State you suspect anaphylaxis.</li>
                        <li><strong>Reassure the Guest</strong> until help arrives.</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="allergen-check-1" onchange="handleCheckboxChange(5)">
                <label for="allergen-check-1">I have familiarized myself with the 14 major allergens and can identify them.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="allergen-check-2" onchange="handleCheckboxChange(5)">
                <label for="allergen-check-2">I will follow the 4-step protocol for every guest with an allergy, without fail.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="allergen-check-3" onchange="handleCheckboxChange(5)">
                <label for="allergen-check-3">I understand the critical steps to take in an emergency situation involving an allergic reaction.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>

      <section id="safety_hygine" class="page" data-module-index="6">
        <h2>Safety & Hygine Standards</h2>
        <p>The safety of our guests and our team is our highest priority. These standards are non-negotiable and must be followed at all times to prevent illness, ensure a safe working environment, and comply with all legal requirements.</p>
        
        <!-- Safety Training Video -->
        <div class="video-section">
            <h4>🛡️ Safety & Hygiene Training Video</h4>
            <div class="video-container">
                <iframe width="100%" height="200" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Safety Training Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <p class="video-description">Essential safety protocols and hygiene practices for restaurant staff.</p>
        </div>
        
        <div class="safety-grid">
            <div class="safety-card personal-hygiene">
                <h3><i class="icon">🧼</i>Personal Hygiene</h3>
                <ul>
                    <li><strong>Handwashing:</strong> Wash hands thoroughly with soap and warm water for at least 20 seconds before work, after breaks, after using the restroom, after handling raw food, and after touching waste.</li>
                    <li><strong>Appearance:</strong> Nails must be kept clean and short. Minimal jewellery is permitted. Refer to the Uniform module for full details on clean uniforms and hairnets.</li>
                     <li><strong>Fitness to Work:</strong> If you are feeling unwell, especially with symptoms of vomiting or diarrhoea, you must report it to your manager and not handle food.</li>
                </ul>
            </div>
            <div class="safety-card food-safety">
                <h3><i class="icon">🌡️</i>Food Safety Principles</h3>
                <ul>
                    <li><strong>Temperature Control:</strong> Keep hot foods hot (above 63°C) and cold foods cold (below 5°C). Use thermometers to verify and record temperatures.</li>
                    <li><strong>Cross-Contamination:</strong> Always use separate, colour-coded chopping boards and utensils for raw meat/fish and ready-to-eat foods (like salads).</li>
                    <li><strong>Stock Rotation:</strong> Follow the FIFO rule (First-In, First-Out). Always label and date deliveries, and use older stock before newer stock.</li>
                </ul>
            </div>
            <div class="safety-card kitchen-cleanliness">
                <h3><i class="icon">✨</i>Kitchen Cleanliness</h3>
                <ul>
                    <li><strong>Clean As You Go:</strong> Maintain a clean workspace at all times. Clean and sanitise work surfaces and equipment regularly throughout your shift, not just at the end.</li>
                    <li><strong>Waste Disposal:</strong> Bins must have lids and be emptied regularly to not overflow. All waste areas should be kept clean.</li>
                    <li><strong>Pest Control:</strong> Keep all storage areas clean and sealed. Report any signs of pests (droppings, gnaw marks) to management immediately.</li>
                </ul>
            </div>
            <div class="safety-card health-safety">
                <h3><i class="icon">⚠️</i>General Health & Safety</h3>
                <ul>
                    <li><strong>Slips, Trips & Falls:</strong> Keep all walkways clear of obstacles like boxes or bags. Clean up any spills immediately and use "wet floor" signs.</li>
                     <li><strong>Safe Lifting:</strong> Bend your knees and keep your back straight when lifting heavy items. Ask for help with very heavy or awkward loads.</li>
                    <li><strong>First Aid:</strong> Know who the trained first-aiders are on your shift and the location of the first aid kit. Report all accidents, no matter how small.</li>
                </ul>
            </div>
        </div>

        <div class="fire-safety-section">
            <h3><i class="icon">🔥</i>Fire Safety</h3>
            <p>In the event of a fire, your quick and calm response is crucial. Familiarise yourself with the following:</p>
            <div class="fire-grid">
                <div class="fire-card">
                    <h4>Discovery</h4>
                    <p>If you discover a fire, immediately and calmly activate the nearest fire alarm call point.</p>
                </div>
                <div class="fire-card">
                    <h4>Evacuation</h4>
                    <p>On hearing the alarm, do not run. Guide guests towards the nearest fire exit. Do not use the lifts.</p>
                </div>
                <div class="fire-card">
                    <h4>Assembly Point</h4>
                    <p>Know the location of our designated fire assembly point and report there immediately after evacuating.</p>
                </div>
                 <div class="fire-card">
                    <h4>Extinguishers</h4>
                    <p>Only attempt to use a fire extinguisher if you are trained and it is safe to do so. Your safety comes first.</p>
                </div>
            </div>
        </div>

        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="safety-check-1" onchange="handleCheckboxChange(6)">
                <label for="safety-check-1">I understand the critical importance of regular and thorough handwashing.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="safety-check-2" onchange="handleCheckboxChange(6)">
                <label for="safety-check-2">I will always follow the rules for temperature control and preventing cross-contamination (FIFO, separate boards).</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="safety-check-3" onchange="handleCheckboxChange(6)">
                <label for="safety-check-3">I know the location of fire exits and the fire assembly point, and understand the evacuation procedure.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>
      
      <section id="bar_training" class="page" data-module-index="7">
        <h2>Bar Training: Alcohol Service Excellence</h2>
        <p>As a member of our bar team, you'll be responsible for serving alcoholic beverages safely and professionally. This module covers our beverage offerings, responsible service practices, and legal requirements.</p>
        
        <div class="bar-training-content">
            <div class="alcohol-categories">
                <h3>🍺 Beers We Serve</h3>
                <div class="beverage-grid">
                    <div class="beverage-card">
                        <h4>Lager</h4>
                        <p><strong>Examples:</strong> Kingfisher, Cobra, Stella Artois</p>
                        <p><strong>Characteristics:</strong> Light, crisp, refreshing. Perfect with spicy Indian dishes.</p>
                        <p><strong>Service:</strong> Serve chilled in branded glasses</p>
                    </div>
                    <div class="beverage-card">
                        <h4>IPA (India Pale Ale)</h4>
                        <p><strong>Examples:</strong> Local craft IPAs</p>
                        <p><strong>Characteristics:</strong> Hoppy, bitter, aromatic. Complements bold flavors.</p>
                        <p><strong>Service:</strong> Serve at cellar temperature</p>
                    </div>
                    <div class="beverage-card">
                        <h4>Wheat Beer</h4>
                        <p><strong>Examples:</strong> Hoegaarden, Blue Moon</p>
                        <p><strong>Characteristics:</strong> Light, citrusy, smooth. Great for lighter meals.</p>
                        <p><strong>Service:</strong> Serve with lemon wedge</p>
                    </div>
                </div>
                
                <h3>🥃 Whiskeys & Spirits</h3>
                <div class="beverage-grid">
                    <div class="beverage-card">
                        <h4>Scotch Whisky</h4>
                        <p><strong>Examples:</strong> Glenfiddich, Macallan, Johnnie Walker</p>
                        <p><strong>Characteristics:</strong> Smoky, complex, aged. Premium choice.</p>
                        <p><strong>Service:</strong> Serve neat or with ice, in whiskey glasses</p>
                    </div>
                    <div class="beverage-card">
                        <h4>Indian Whiskey</h4>
                        <p><strong>Examples:</strong> Royal Stag, Blenders Pride</p>
                        <p><strong>Characteristics:</strong> Smooth, accessible, popular choice.</p>
                        <p><strong>Service:</strong> Serve with mixers or neat</p>
                    </div>
                    <div class="beverage-card">
                        <h4>Bourbon</h4>
                        <p><strong>Examples:</strong> Jack Daniel's, Jim Beam</p>
                        <p><strong>Characteristics:</strong> Sweet, vanilla notes, American style.</p>
                        <p><strong>Service:</strong> Great in cocktails or with cola</p>
                    </div>
                </div>
                
                <h3>🍷 Wines</h3>
                <div class="beverage-grid">
                    <div class="beverage-card">
                        <h4>Red Wine</h4>
                        <p><strong>Examples:</strong> Cabernet Sauvignon, Merlot, Shiraz</p>
                        <p><strong>Characteristics:</strong> Full-bodied, pairs well with meat dishes.</p>
                        <p><strong>Service:</strong> Serve at room temperature, decant if needed</p>
                    </div>
                    <div class="beverage-card">
                        <h4>White Wine</h4>
                        <p><strong>Examples:</strong> Chardonnay, Sauvignon Blanc, Pinot Grigio</p>
                        <p><strong>Characteristics:</strong> Light, crisp, perfect with seafood and vegetarian dishes.</p>
                        <p><strong>Service:</strong> Serve chilled, 8-10°C</p>
                    </div>
                    <div class="beverage-card">
                        <h4>Rosé Wine</h4>
                        <p><strong>Examples:</strong> Provence Rosé, White Zinfandel</p>
                        <p><strong>Characteristics:</strong> Light, fruity, versatile pairing.</p>
                        <p><strong>Service:</strong> Serve chilled, perfect for summer</p>
                    </div>
                </div>
                
                <h3>🍸 Gins & Cocktails</h3>
                <div class="beverage-grid">
                    <div class="beverage-card">
                        <h4>Premium Gins</h4>
                        <p><strong>Examples:</strong> Bombay Sapphire, Hendrick's, Tanqueray</p>
                        <p><strong>Characteristics:</strong> Botanical, juniper-forward, versatile.</p>
                        <p><strong>Service:</strong> Perfect for G&Ts, martinis</p>
                    </div>
                    <div class="beverage-card">
                        <h4>Signature Cocktails</h4>
                        <p><strong>Examples:</strong> Mango Lassi Martini, Spiced Old Fashioned</p>
                        <p><strong>Characteristics:</strong> Indian-inspired, unique flavors.</p>
                        <p><strong>Service:</strong> Follow recipe precisely, garnish appropriately</p>
                    </div>
                </div>
            </div>
            
            <div class="service-guidelines">
                <h3>🍻 Responsible Service Guidelines</h3>
                <div class="guidelines-grid">
                    <div class="guideline-card">
                        <h4>Age Verification</h4>
                        <ul>
                            <li>Always check ID for anyone who appears under 25</li>
                            <li>Accept: Driving license, passport, PASS card</li>
                            <li>Refuse service if ID is unclear or suspicious</li>
                            <li>When in doubt, ask a manager</li>
                        </ul>
                    </div>
                    <div class="guideline-card">
                        <h4>Signs of Intoxication</h4>
                        <ul>
                            <li>Slurred speech or difficulty speaking</li>
                            <li>Unsteady movement or stumbling</li>
                            <li>Aggressive or inappropriate behavior</li>
                            <li>Bloodshot or glassy eyes</li>
                            <li>Overly loud or disruptive behavior</li>
                        </ul>
                    </div>
                    <div class="guideline-card">
                        <h4>Refusal Protocol</h4>
                        <ul>
                            <li>Politely explain why service is refused</li>
                            <li>Offer non-alcoholic alternatives</li>
                            <li>Involve manager if customer becomes difficult</li>
                            <li>Document incidents for management review</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="pairing-recommendations">
                <h3>🍽️ Food & Beverage Pairing Recommendations</h3>
                <div class="pairing-grid">
                    <div class="pairing-card">
                        <h4>Spicy Curries</h4>
                        <p><strong>Best Pairings:</strong> Lager beer, Riesling wine, Gin & Tonic</p>
                        <p><strong>Why:</strong> Cool down the heat while complementing flavors</p>
                    </div>
                    <div class="pairing-card">
                        <h4>Tandoori Dishes</h4>
                        <p><strong>Best Pairings:</strong> IPA beer, Cabernet Sauvignon, Whiskey</p>
                        <p><strong>Why:</strong> Bold flavors match the smoky, charred taste</p>
                    </div>
                    <div class="pairing-card">
                        <h4>Creamy Curries</h4>
                        <p><strong>Best Pairings:</strong> Chardonnay, Wheat beer, Vodka cocktails</p>
                        <p><strong>Why:</strong> Cut through richness with acidity or bubbles</p>
                    </div>
                    <div class="pairing-card">
                        <h4>Vegetarian Dishes</h4>
                        <p><strong>Best Pairings:</strong> Sauvignon Blanc, Light beer, Gin cocktails</p>
                        <p><strong>Why:</strong> Enhance fresh, herbal flavors</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="bar-check-1" onchange="handleCheckboxChange(7)">
                <label for="bar-check-1">I understand the different types of alcoholic beverages we serve.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="bar-check-2" onchange="handleCheckboxChange(7)">
                <label for="bar-check-2">I know how to properly serve each type of beverage.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="bar-check-3" onchange="handleCheckboxChange(7)">
                <label for="bar-check-3">I understand responsible service practices and legal requirements.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="bar-check-4" onchange="handleCheckboxChange(7)">
                <label for="bar-check-4">I can recommend appropriate beverage pairings for our dishes.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>
      
      <section id="food_running" class="page" data-module-index="8">
        <h2>Food Running: The Art of Perfect Service</h2>
        <p>Food running is a crucial role that ensures our guests receive their meals hot, fresh, and beautifully presented. This module covers everything you need to know to excel as a food runner.</p>
        
        <div class="food-running-content">
            <div class="service-steps">
                <h3>📋 Food Running Process</h3>
                <div class="steps-container">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Receiving Orders</h4>
                            <ul>
                                <li>Check kitchen ticket for accuracy</li>
                                <li>Verify table number and seat positions</li>
                                <li>Confirm special dietary requirements</li>
                                <li>Check order timing and sequence</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Dish Identification</h4>
                            <ul>
                                <li>Learn visual identification of all menu items</li>
                                <li>Check garnish and presentation standards</li>
                                <li>Verify portion sizes and plating</li>
                                <li>Confirm temperature (hot dishes hot, cold dishes cold)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Tray Preparation</h4>
                            <ul>
                                <li>Use appropriate tray size for order</li>
                                <li>Place heavier items in center</li>
                                <li>Arrange dishes for easy serving</li>
                                <li>Add necessary accompaniments (naan, rice, chutneys)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Approaching the Table</h4>
                            <ul>
                                <li>Approach with confidence and smile</li>
                                <li>Make eye contact with guests</li>
                                <li>Announce dishes clearly and professionally</li>
                                <li>Wait for acknowledgment before placing dishes</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h4>Dish Placement</h4>
                            <ul>
                                <li>Place dishes in correct positions</li>
                                <li>Ensure proper spacing between plates</li>
                                <li>Position garnishes facing the guest</li>
                                <li>Place accompaniments within easy reach</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">6</div>
                        <div class="step-content">
                            <h4>Final Checks</h4>
                            <ul>
                                <li>Confirm all items have been delivered</li>
                                <li>Check if guests need anything else</li>
                                <li>Inform server of any issues</li>
                                <li>Return to kitchen for next order</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tray-techniques">
                <h3>🍽️ Tray Holding Techniques</h3>
                <div class="technique-grid">
                    <div class="technique-card">
                        <h4>Basic Tray Hold</h4>
                        <ul>
                            <li>Hold tray with palm flat underneath</li>
                            <li>Keep fingers spread for stability</li>
                            <li>Maintain level position</li>
                            <li>Use non-dominant hand for support</li>
                        </ul>
                    </div>
                    <div class="technique-card">
                        <h4>Heavy Load Technique</h4>
                        <ul>
                            <li>Use both hands for heavy trays</li>
                            <li>Keep tray close to body</li>
                            <li>Bend knees, not back</li>
                            <li>Take smaller steps for stability</li>
                        </ul>
                    </div>
                    <div class="technique-card">
                        <h4>Single Hand Service</h4>
                        <ul>
                            <li>Use serving hand for plates</li>
                            <li>Keep tray steady with other hand</li>
                            <li>Practice smooth movements</li>
                            <li>Maintain professional posture</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="greeting-protocols">
                <h3>👋 Professional Greetings</h3>
                <div class="greeting-examples">
                    <div class="greeting-card">
                        <h4>Standard Greeting</h4>
                        <p><strong>"Good evening, here's your [dish name]. Enjoy your meal!"</strong></p>
                        <p>Use for regular service, friendly and professional</p>
                    </div>
                    <div class="greeting-card">
                        <h4>Special Occasions</h4>
                        <p><strong>"Happy birthday! Here's your special dessert with our compliments."</strong></p>
                        <p>Use for celebrations, anniversaries, special requests</p>
                    </div>
                    <div class="greeting-card">
                        <h4>Dietary Requirements</h4>
                        <p><strong>"Here's your gluten-free naan and dairy-free curry as requested."</strong></p>
                        <p>Always confirm special dietary needs</p>
                    </div>
                    <div class="greeting-card">
                        <h4>Hot Dishes</h4>
                        <p><strong>"Careful, this dish is very hot. Please enjoy!"</strong></p>
                        <p>Always warn guests about hot items</p>
                    </div>
                </div>
            </div>
            
            <div class="common-challenges">
                <h3>⚠️ Common Challenges & Solutions</h3>
                <div class="challenge-grid">
                    <div class="challenge-card">
                        <h4>Wrong Table</h4>
                        <p><strong>Problem:</strong> Delivering to incorrect table</p>
                        <p><strong>Solution:</strong> Double-check table number, ask server for confirmation</p>
                    </div>
                    <div class="challenge-card">
                        <h4>Missing Items</h4>
                        <p><strong>Problem:</strong> Order incomplete or missing dishes</p>
                        <p><strong>Solution:</strong> Check kitchen ticket, inform server immediately</p>
                    </div>
                    <div class="challenge-card">
                        <h4>Cold Food</h4>
                        <p><strong>Problem:</strong> Food arrives cold to table</p>
                        <p><strong>Solution:</strong> Return to kitchen for reheating, apologize to guests</p>
                    </div>
                    <div class="challenge-card">
                        <h4>Spill or Mess</h4>
                        <p><strong>Problem:</strong> Accidentally spill food or sauce</p>
                        <p><strong>Solution:</strong> Clean immediately, replace dish if necessary</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="checklist-container">
            <h3>Confirm Your Understanding</h3>
            <div class="checklist-item">
                <input type="checkbox" id="food-check-1" onchange="handleCheckboxChange(8)">
                <label for="food-check-1">I understand the complete food running process from kitchen to table.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="food-check-2" onchange="handleCheckboxChange(8)">
                <label for="food-check-2">I can identify all menu items and their proper presentation.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="food-check-3" onchange="handleCheckboxChange(8)">
                <label for="food-check-3">I know how to hold trays safely and serve dishes professionally.</label>
            </div>
            <div class="checklist-item">
                <input type="checkbox" id="food-check-4" onchange="handleCheckboxChange(8)">
                <label for="food-check-4">I can handle common challenges and maintain service quality.</label>
            </div>
        </div>
        <div class="module-nav"></div>
      </section>
      
      <section id="assesment" class="page" data-module-index="9">
         <div class="container">
          <h2>Final Assessment</h2>
          <p>Test your knowledge of YATRI's training modules. You must score at least 25 out of 30 to complete your onboarding.</p>
          <form id="assesmentForm">
            <div id="assesmentArea">
                <p>Loading your assessment questions...</p>
            </div>
            <button type="button" class="btn" id="submitAssesmentBtn" onclick="submitAssesment()">Submit Assessment</button>
          </form>
          <div id="assesmentResult" style="margin-top: 20px;"></div>

          <div id="certificate-container">
            <div class="certificate-body">
                <img src="LOGO3-2366784072.png" alt="Yatri Logo" class="cert-logo">
                <div class="certificate-title">
                    <h2>Certificate of Completion</h2>
                </div>
                <p class="award-text">This certificate is proudly presented to</p>
                <h3 id="cert-staff-name">[Staff Name]</h3>
                <p class="completion-text">for successfully completing the YATRI Staff Training Program, demonstrating outstanding commitment and proficiency in all required modules.</p>
                <div id="cert-modules-list" class="cert-modules-list">
                    </div>
            </div>
            <div class="certificate-footer">
                <div class="footer-item">
                    <span id="cert-completion-date" class="value">[Date]</span>
                    <span class="label">Date of Completion</span>
                </div>
                <div class="footer-item">
                    <span class="value">&nbsp;</span>
                    <span class="label">Management Signature</span>
                </div>
            </div>
            <div class="print-btn-container">
                <button class="btn" onclick="window.print()">Print Certificate</button>
            </div>
          </div>
        </div>
        <div class="module-nav"></div>
      </section>

    </div>
  </section>

  <section id="admin-dashboard" style="display: none;">
    <header>
      <img src="LOGO3-2366784072.png" alt="Logo" class="header-logo">
      <h1>Admin Dashboard</h1>
      <a href="#" onclick="logout()" class="btn" style="position: absolute; top: 20px; right: 20px; background: linear-gradient(135deg, #ff4d4d 0%, #cc0000 100%);">Logout</a>
    </header>
    <div class="container admin-grid">
      <div class="admin-section">
        <h3>Create New Staff</h3>
        <form id="create-user-form">
          <label for="new-staff-name">Full Name</label>
          <input type="text" id="new-staff-name" placeholder="Staff Full Name" required>
          
          <label for="new-staff-id">Staff ID</label>
          <input type="text" id="new-staff-id" placeholder="Staff ID (e.g., john.d)" required>
          
          <label for="new-staff-email">Email Address</label>
	 <input type="email" id="new-staff-email" placeholder="Email Address" required autocomplete="off">
          
	 <label for="new-staff-password">Password</label>
	 <input type="password" id="new-staff-password" placeholder="Password" required autocomplete="off">
          
          <button type="submit" class="btn">Create Staff Member</button>
        </form>
        <p id="create-user-message"></p>
      </div>
      <div class="admin-section">
        <h3>Manage Staff & Progress</h3>
        <div style="overflow-x:auto;">
          <table id="staff-progress-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Staff ID</th>
                <th>Email</th>
                <th>Created By</th>
                <th>Progress</th>
                <th>Quiz Score</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="progress-table-body"></tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
  <footer><p>&copy; 2025 YATRI Indian Restaurant. All rights reserved.</p></footer>

<script>
    const modules = ["welcome", "responsibilities", "steps_service", "menu", "uniform", "allergen", "safety_hygine", "bar_training", "food_running"];
    let currentLoggedInUser = null;
    let currentAdminId = null; // ADDED: Variable to store the logged-in admin's ID
    let currentUsersData = [];
    let currentAssesmentQuestions = [];

    const questionBank = [
        // Welcome & Values
        { q: "What are the names of the three friends who founded Yatri?", a: ["Anil, Ben, and Chris", "Prashant, Vikram, and Hemant", "Raj, Sam, and Tom"], correct: 1 },
        { q: "What is Yatri's mission?", a: ["To be the cheapest Indian restaurant in London.", "To serve authentic Indian dishes in a welcoming, clean, and respectful environment.", "To serve only spicy food."], correct: 1 },
        { q: "Which of the following is NOT listed as a core value of Yatri?", a: ["Hospitality & Respect", "Unified Teamwork", "Speed Above All Else"], correct: 2 },
        { q: "How should every guest be treated, according to Yatri's values?", a: ["As a potential food critic.", "As an honoured guest in your own home.", "As a regular customer."], correct: 1 },
        { q: "What does 'Yatri' mean?", a: ["Food", "Spice", "Traveller"], correct: 2 },
        { q: "Where did the founders' dream for Yatri become a reality?", a: ["Near King's Cross", "Near Buckingham Palace", "In Southall"], correct: 0 },
        { q: "What is the standard for quality at Yatri?", a: ["Good enough", "Better than average", "Excellence"], correct: 2 },
        { q: "What is considered a non-negotiable foundation for guest and staff well-being?", a: ["Fast Wi-Fi", "Safety & Cleanliness", "Loud Music"], correct: 1 },
        { q: "What is the key to success for the floor teams?", a: ["Learning about and engaging guests in our flavours and experience.", "Memorizing the till functions.", "Clearing tables as fast as possible."], correct: 0 },
        { q: "Under 'Guest Experience', what should you do to enhance a guest's meal?", a: ["Wait for them to ask for recommendations.", "Proactively upsell and recommend dishes.", "Give them the menu and walk away."], correct: 1 },
        { q: "What must you uphold to protect diners with specific dietary needs?", a: ["The 'Guest Allergy' steps of service.", "The restaurant's opening times.", "The price list."], correct: 0 },
        { q: "In 'Team & Operations', who should you partner with to deliver perfect service?", a: ["The delivery drivers.", "The kitchen team.", "The bar staff only."], correct: 1 },
        { q: "What are you expected to do with guest feedback?", a: ["Ignore it unless it's a formal complaint.", "Seek it at all opportunities and learn from it.", "Only listen to positive feedback."], correct: 1 },
        { q: "What does being a 'Natural Host' mean in the person specification?", a: ["You enjoy talking more than working.", "You relish making people feel welcome and cared for.", "You have hosted parties before."], correct: 1 },
        { q: "As a Yatri Ambassador, you should project a ____, friendly, and professional image.", a: ["serious", "positive", "reserved"], correct: 1 },
        { q: "What should you do if you notice a maintenance issue?", a: ["Ignore it and hope someone else finds it.", "Try to fix it yourself without training.", "Report it promptly."], correct: 2 },
        { q: "How many steps are in the Yatri Steps of Service?", a: ["6", "8", "10"], correct: 1 },
        { q: "At which step is it crucial to ask about allergies?", a: ["Step 1: Greeting & Arrival", "Step 2: Allergies & Drinks", "Step 3: Taking the Order"], correct: 1 },
        { q: "What should you do after taking the food order to ensure accuracy?", a: ["Walk straight to the till.", "Repeat the order back to the guest.", "Ask them to write it down."], correct: 1 },
        { q: "What is the 'Mid-Meal Check' (Step 6) for?", a: ["To ask how everything is and clear finished plates.", "To give the guests the bill.", "To ask if they are finished."], correct: 0 },
        { q: "What is the final action in the Steps of Service?", a: ["Clearing the table.", "Handing them a feedback form.", "Thanking guests sincerely and inviting them to return."], correct: 2 },
        { q: "What is the very first thing you should do when a guest enters?", a: ["Ask if they have a reservation.", "Provide a warm, instant welcome.", "Tell them to wait at the door."], correct: 1 },
        { q: "During 'Main Course Service', what should you anticipate?", a: ["The guest wanting the bill immediately.", "The guest needs such as additional sauces.", "The guest wanting to leave."], correct: 1 },
        { q: "When offering dessert or coffee, you should be proactive without being ____.", a: ["friendly", "helpful", "pushy"], correct: 2 },
        { q: "Why is a sincere farewell important?", a: ["It's required by law.", "It leaves a positive lasting impression.", "It makes them pay faster."], correct: 1 },
        { q: "Which small plate is listed as Vegan?", a: ["Paneer Kali Mirch", "Samosa Chaat", "Bhel Puri Chaat"], correct: 2 },
        { q: "What is the main protein in 'Paneer Kali Mirch'?", a: ["Chicken", "Indian Cheese (Paneer)", "Lamb"], correct: 1 },
        { q: "What does 'Macchi' mean in India?", a: ["Chicken", "Prawn", "Fish"], correct: 2 },
        { q: "How are the lamb chops in 'Dhaniya Adaraki Champ' cooked?", a: ["Fried", "In a tandoor", "Boiled"], correct: 1 },
        { q: "Which dish is described as a 'bold fusion of flavour and heat'?", a: ["Onion Bhaji", "Chilli Paneer", "Vegetable Samosa"], correct: 1 },
        { q: "What kind of fish is used in the Macchi Tikka and Fish Pakora?", a: ["Cod", "Salmon", "Tilapia"], correct: 2 },
        { q: "How many pieces are in a portion of Lamb Samosa?", a: ["One", "Two", "Three"], correct: 3 },
        { q: "Nilgiri Sheekh Kabab is made from minced ____.", a: ["chicken", "vegetables", "lamb"], correct: 2 },
        { q: "Bhel Puri Chaat is primarily made with what?", a: ["Puffed rice", "Crispy pastry", "Potatoes"], correct: 0 },
        { q: "Onion Bhaji is coated in what type of flour?", a: ["Plain flour", "Cornflour", "Gram flour"], correct: 2 },
        { q: "Which dish is described as 'Tandoori chicken in a creamy butter sauce'?", a: ["Bombay Chicken Curry", "Chicken Tikka Makhani", "Korma"], correct: 1 },
        { q: "The Keralian curry has a base of what?", a: ["Tomato", "Yoghurt", "Coconut"], correct: 2 },
        { q: "What is the main vegetable in 'Baigan Bartha'?", a: ["Okra", "Aubergine", "Spinach"], correct: 1 },
        { q: "Which dal is described as the 'ultimate comfort food'?", a: ["Dal Tadkewali", "Dal Palak", "Black Dal"], correct: 2 },
        { q: "'Lasooni Palak' features which two prominent ingredients?", a: ["Lentils and Potato", "Spinach and Garlic", "Chicken and Tomato"], correct: 1 },
        { q: "The 'Railway Chicken Curry' contains chicken, potato, and what other distinctive ingredient?", a: ["A boiled egg", "Coconut milk", "Paneer"], correct: 0 },
        { q: "Which dish is described as being cooked 'upside down in earthen pots'?", a: ["Bhindi Corn Masala", "Gujarati Undhiyu", "Bombay Aloo"], correct: 1 },
        { q: "The Bombay Chicken Curry is recommended for lovers of ____ curry.", a: ["mild", "creamy", "spicy"], correct: 2 },
        { q: "What protein option is NOT available for the 'Korma your Way'?", a: ["Lamb", "Chicken", "Paneer"], correct: 0 },
        { q: "Tofu Tawa Masala is cooked on a Tawa, which is a type of ____.", a: ["deep pot", "flat pan", "skewer"], correct: 1 },
        { q: "Which of these is a side dish, not a main course?", a: ["Paneer Butter Masala", "Mughlai Kadhai Lamb", "Bombay Aloo"], correct: 2 },
        { q: "Which Naan bread is stuffed with mixed nuts and coconut?", a: ["Garlic Naan", "Peshawari Naan", "Cheese Naan"], correct: 1 },
        { q: "Which Naan is listed as Vegan?", a: ["Butter Naan", "Cheese Naan", "Plain Naan"], correct: 2 },
        { q: "Yatri's Biryani is served with a side of what?", a: ["Mango Chutney", "Salad", "Raita"], correct: 2 },
        { q: "'Jeera Rice' is tempered with what spice?", a: ["Turmeric", "Cumin", "Coriander"], correct: 1 },
        { q: "What two types of cheese are in the Cheese Naan?", a: ["Paneer and Goat's cheese", "Cheddar and Mozzarella", "Stilton and Brie"], correct: 1 },
        { q: "What kind of shoes must be worn as part of the uniform?", a: ["Open-toed sandals", "Any comfortable trainers", "Closed-toe, slip-resistant shoes"], correct: 2 },
        { q: "How should jewellery be worn?", a: ["As much as you like", "Minimal (e.g., stud earrings, wedding band)", "No jewellery is allowed at all"], correct: 1 },
        { q: "Who is responsible for laundering your uniform?", a: ["The restaurant", "You are", "A designated laundry service"], correct: 1 },
        { q: "Fragrance and makeup should be ____.", a: ["strong and noticeable", "not worn at all", "minimal and natural"], correct: 2 },
        { q: "Where should your name badge be?", a: ["In your pocket", "Clean and clearly visible", "Only worn by managers"], correct: 1 },
        { q: "What is the standard for hair?", a: ["Any style is fine", "Clean and tied back or contained neatly", "It must be cut short"], correct: 1 },
        { q: "How many major allergens are listed in the training module?", a: ["10", "12", "14"], correct: 2 },
        { q: "Which of these is NOT one of the 14 major allergens?", a: ["Gluten", "Mustard", "Tomato"], correct: 2 },
        { q: "What is the FIRST step in the Guest Allergy Protocol?", a: ["Communicate to the chef", "Ask & Listen", "Record & Confirm"], correct: 1 },
        { q: "If a guest is having a severe allergic reaction, what is the first thing you should do?", a: ["Offer them some water", "Stay Calm & Alert the Manager", "Look for their wallet"], correct: 1 },
        { q: "What number should you call in an allergy emergency?", a: ["111", "999", "The restaurant manager's mobile"], correct: 1 },
        { q: "When delivering an allergen-safe meal, what should you do?", a: ["Place it anywhere on the table", "Confirm with the chef and announce the dish to the correct guest", "Ask who has the allergy"], correct: 1 },
        { q: "When taking an order, you should always ask: 'Does anyone have any ____ or dietary requirements?'", a: ["preferences", "allergies", "questions"], correct: 1 },
        { q: "Peanuts and Tree Nuts are considered separate allergens.", a: ["True", "False"], correct: 0 },
        { q: "Milk is listed as a major allergen.", a: ["True", "False"], correct: 0 },
        { q: "After informing the manager and chef of an allergy, what else must you ensure?", a: ["The allergy is clearly marked on the kitchen ticket.", "The guest pays extra.", "The guest signs a waiver."], correct: 0 },
        { q: "For how long should you wash your hands with soap and warm water?", a: ["5 seconds", "At least 20 seconds", "1 minute"], correct: 1 },
        { q: "What does the FIFO rule stand for?", a: ["First-In, Fast-Out", "Find-It, File-It", "First-In, First-Out"], correct: 2 },
        { q: "Hot food should be kept above what temperature?", a: ["50°C", "63°C", "75°C"], correct: 1 },
        { q: "Cold food should be kept below what temperature?", a: ["5°C", "8°C", "10°C"], correct: 0 },
        { q: "What is the 'Clean As You Go' policy?", a: ["Clean everything at the end of the night.", "Maintain a clean workspace at all times during your shift.", "Only clean your own station."], correct: 1 },
        { q: "What should you do if you discover a fire?", a: ["Shout 'FIRE!' and run", "Calmly activate the nearest fire alarm call point", "Try to put it out yourself immediately"], correct: 1 },
        { q: "During a fire evacuation, you should NOT use the ____.", a: ["stairs", "fire exits", "lifts"], correct: 2 },
        { q: "Where should you go after evacuating the building for a fire?", a: ["Home", "To the designated fire assembly point", "To the car park"], correct: 1 },
        { q: "What should you do if you are feeling unwell with vomiting or diarrhoea?", a: ["Come to work but avoid customers.", "Take some medicine and work your shift.", "Report it to your manager and not handle food."], correct: 2 },
        { q: "How can you prevent cross-contamination?", a: ["By using the same chopping board for all foods.", "By using separate, colour-coded boards for raw and ready-to-eat foods.", "By washing foods before cooking."], correct: 1 },
        { q: "What should you do immediately after a liquid spill?", a: ["Leave it for the cleaners.", "Put a chair over it.", "Clean it up and use a 'wet floor' sign."], correct: 2 },
        { q: "When lifting heavy items, you should bend your ____ and keep your back straight.", a: ["arms", "knees", "waist"], correct: 1 },

        // Additional Menu Questions
        { q: "Which curry is described as having a coconut base?", a: ["Keralian Curry", "Bombay Chicken Curry", "Railway Chicken Curry"], correct: 0 },
        { q: "What is the main protein in 'Tofu Tawa Masala'?", a: ["Paneer", "Chicken", "Tofu"], correct: 2 },
        { q: "Which dish is cooked 'upside down in earthen pots'?", a: ["Gujarati Undhiyu", "Bhindi Corn Masala", "Bombay Aloo"], correct: 0 },
        { q: "What type of rice is 'Jeera Rice'?", a: ["Basmati rice tempered with cumin", "Jasmine rice with spices", "Wild rice with herbs"], correct: 0 },
        { q: "Which naan is described as being stuffed with mixed nuts and coconut?", a: ["Peshawari Naan", "Cheese Naan", "Garlic Naan"], correct: 0 },
        { q: "What are the two types of cheese in Cheese Naan?", a: ["Cheddar and Mozzarella", "Paneer and Goat's cheese", "Stilton and Brie"], correct: 0 },
        { q: "Which dish contains chicken, potato, and a boiled egg?", a: ["Railway Chicken Curry", "Bombay Chicken Curry", "Chicken Tikka Makhani"], correct: 0 },
        { q: "What is the main vegetable in 'Lasooni Palak'?", a: ["Potato", "Spinach", "Okra"], correct: 1 },
        { q: "Which dal is described as the 'ultimate comfort food'?", a: ["Dal Tadkewali", "Black Dal", "Dal Palak"], correct: 1 },
        { q: "What is the main vegetable in 'Baigan Bartha'?", a: ["Okra", "Aubergine", "Spinach"], correct: 1 },
        { q: "Which curry is recommended for lovers of spicy food?", a: ["Korma", "Bombay Chicken Curry", "Butter Chicken"], correct: 1 },
        { q: "What type of fish is used in Macchi Tikka and Fish Pakora?", a: ["Cod", "Salmon", "Tilapia"], correct: 2 },
        { q: "Which dish features minced lamb with kabab spices?", a: ["Nilgiri Sheekh Kabab", "Dhaniya Adaraki Champ", "Lamb Samosa"], correct: 0 },
        { q: "What is the cooking method for 'Tandoori Prawns'?", a: ["Fried", "Cooked in tandoor", "Boiled"], correct: 1 },
        { q: "Which dish is described as a 'bold fusion of flavour and heat'?", a: ["Chilli Paneer", "Onion Bhaji", "Chicken Tikka"], correct: 0 },

        // Situation-Based Questions (Tougher scenarios)
        { q: "A guest orders Chicken Tikka Makhani but mentions they're allergic to dairy. What should you do?", a: ["Tell them the dish contains dairy and suggest alternatives", "Serve it anyway as the allergy might not be severe", "Ask them to sign a waiver first"], correct: 0 },
        { q: "A table of 8 guests has been waiting 45 minutes for their main courses. Two guests are visibly upset. How should you handle this?", a: ["Ignore them and hope the food comes soon", "Apologize, check with kitchen, offer complimentary drinks or appetizers", "Tell them to wait longer as it's a busy night"], correct: 1 },
        { q: "You notice a guest who appears intoxicated trying to order another drink. What's the correct action?", a: ["Serve them as they're paying customers", "Politely decline service and offer food or non-alcoholic options", "Serve them but water it down"], correct: 1 },
        { q: "A guest complains their Lamb Samosa is cold when you deliver it. What should you do?", a: ["Tell them to eat it anyway", "Apologize, take it back, and get a fresh one from the kitchen", "Blame the kitchen staff"], correct: 1 },
        { q: "During peak service, you realize you've been taking orders incorrectly due to noise. How should you proceed?", a: ["Continue as normal to save time", "Slow down, confirm each order clearly, and double-check with guests", "Ask guests to write their own orders"], correct: 1 },
        { q: "A guest asks if the Biryani contains nuts. You're not sure. What should you do?", a: ["Guess and say it probably doesn't", "Check with the kitchen immediately before serving", "Tell them to avoid it just in case"], correct: 1 },
        { q: "You're carrying a tray of drinks and accidentally bump into a guest, spilling a drink. What's the best response?", a: ["Blame the guest for being in the way", "Apologize immediately, clean up, and replace the drink", "Ignore it and continue working"], correct: 1 },
        { q: "A guest requests the Chicken Tikka Makhani to be extra spicy. How should you handle this?", a: ["Tell them it's not possible to modify", "Check with kitchen if modifications are possible and inform guest", "Add chili powder at the table"], correct: 1 },
        { q: "You notice a colleague not washing their hands after handling raw meat. What should you do?", a: ["Ignore it as it's not your responsibility", "Politely remind them about hand hygiene protocols", "Report them to management immediately"], correct: 1 },
        { q: "A family with young children orders very spicy dishes but the children seem unable to handle the heat. What's the appropriate response?", a: ["Tell them they should have ordered mild dishes", "Offer to bring milder alternatives or cooling accompaniments", "Suggest they leave"], correct: 1 },
        { q: "During a busy service, you realize you've mixed up orders for two tables. How should you resolve this?", a: ["Hope guests don't notice", "Immediately inform both tables, apologize, and correct the orders", "Blame the kitchen for the mix-up"], correct: 1 },
        { q: "A guest complains that their Tandoori Prawns are overcooked and rubbery. What's the best course of action?", a: ["Argue that they're cooked correctly", "Apologize, offer to replace the dish or provide an alternative", "Tell them prawns are naturally rubbery"], correct: 1 },
        { q: "You're running food to a table but notice the presentation doesn't match the standard. What should you do?", a: ["Serve it anyway to save time", "Take it back to kitchen for proper presentation", "Apologize to guests and explain the kitchen is busy"], correct: 1 },
        { q: "A guest asks about the ingredients in the Black Dal. You're not certain about all ingredients. How should you respond?", a: ["Make up ingredients you think might be in it", "Honestly admit you're not sure and offer to check with the kitchen", "Tell them to look it up online"], correct: 1 },
        { q: "You notice a guest at table 5 has been waiting 30 minutes for their bill while you're busy with other tables. What should you prioritize?", a: ["Continue with current tasks", "Immediately attend to the waiting guest for their bill", "Ask another colleague to handle it"], correct: 1 },

        // Bar Training Questions
        { q: "What is the minimum age to serve alcohol in the UK?", a: ["16", "18", "21"], correct: 1 },
        { q: "Which of these is NOT a sign that someone may be intoxicated?", a: ["Slurred speech", "Being friendly and talkative", "Unsteady on their feet"], correct: 1 },
        { q: "What should you do if you suspect someone is underage trying to purchase alcohol?", a: ["Ask for ID and refuse service if they can't provide valid ID", "Serve them anyway as they might be of age", "Ask their friend to buy it for them"], correct: 0 },
        { q: "Which beer is described as light, crisp, and refreshing - perfect with spicy Indian dishes?", a: ["IPA", "Lager", "Stout"], correct: 1 },
        { q: "At what temperature should lager be served?", a: ["Room temperature", "Chilled in branded glasses", "Warm"], correct: 1 },
        { q: "What does IPA stand for?", a: ["International Pale Ale", "India Pale Ale", "Imperial Premium Ale"], correct: 1 },
        { q: "Which wine pairs best with spicy curries?", a: ["Full-bodied red wine", "Light, crisp white wine", "Sweet dessert wine"], correct: 1 },
        { q: "What should you do if a guest appears to be drinking too much alcohol?", a: ["Continue serving them", "Politely decline further service and offer food or non-alcoholic drinks", "Serve them but water down their drinks"], correct: 1 },
        { q: "Which cocktail typically contains gin, tonic water, and lime?", a: ["Mojito", "Gin and Tonic", "Margarita"], correct: 1 },
        { q: "What is the legal blood alcohol limit for driving in the UK?", a: ["0.05%", "0.08%", "0.10%"], correct: 1 },
        { q: "Which of these is a non-alcoholic option you should always have available?", a: ["Soft drinks, mocktails, and water", "Only water", "Only soft drinks"], correct: 0 },
        { q: "What should you do if someone asks you to serve alcohol to an obviously intoxicated person?", a: ["Serve them as they're paying", "Politely refuse and explain the policy", "Ask a manager to handle it"], correct: 1 },
        { q: "Which type of glass should lager be served in?", a: ["Any glass available", "Branded glasses", "Plastic cups"], correct: 1 },
        { q: "What is responsible alcohol service?", a: ["Serving as much as guests want", "Monitoring consumption and refusing service when appropriate", "Only serving expensive drinks"], correct: 1 },
        { q: "Which factor should you consider when recommending wine to guests?", a: ["Only the price", "The food they're ordering and their preferences", "Only what's most expensive"], correct: 1 },

        // Food Running Questions
        { q: "What is the first thing you should do when receiving an order from the kitchen?", a: ["Take it straight to the table", "Check the kitchen ticket for accuracy and table number", "Ask the chef if it's ready"], correct: 1 },
        { q: "When delivering food, what should you announce to the table?", a: ["Nothing, just place it down", "The dish name clearly to the correct guest", "Ask who ordered what"], correct: 1 },
        { q: "What should you do if you notice the food presentation doesn't meet standards?", a: ["Serve it anyway to save time", "Take it back to kitchen for proper presentation", "Apologize to guests about the presentation"], correct: 1 },
        { q: "How should you handle hot plates when delivering food?", a: ["Use your bare hands", "Use proper serving equipment and warn guests about hot plates", "Ask guests to help carry them"], correct: 1 },
        { q: "What is the correct order for delivering courses?", a: ["Any order is fine", "Appetizers first, then mains, then desserts", "Whatever is ready first"], correct: 1 },
        { q: "What should you do if you realize you've delivered food to the wrong table?", a: ["Leave it there", "Immediately correct the mistake and apologize to both tables", "Blame the kitchen"], correct: 1 },
        { q: "When should you check with the kitchen about order timing?", a: ["Never, just wait", "When orders are taking longer than expected", "Only when guests complain"], correct: 1 },
        { q: "What should you do if a guest asks about ingredients in a dish you're delivering?", a: ["Make something up", "Honestly say you don't know and offer to check", "Tell them to ask the waiter"], correct: 1 },
        { q: "How should you handle special dietary requirements when running food?", a: ["Ignore them", "Double-check the ticket and confirm with the guest", "Ask the guest to remind you"], correct: 1 },
        { q: "What is the most important thing to verify before leaving the kitchen with food?", a: ["That it looks good", "Table number, seat position, and any special requirements", "That it's hot"], correct: 1 },
        { q: "How should you communicate with the serving team when running food?", a: ["Don't communicate at all", "Clearly announce what you're delivering and to which table", "Only communicate if there's a problem"], correct: 1 },
        { q: "What should you do if you drop or spill food while running it?", a: ["Continue to the table", "Immediately return to kitchen for replacement", "Try to clean it up and serve anyway"], correct: 1 },
        { q: "When delivering multiple dishes to one table, what's the best approach?", a: ["Deliver them one by one", "Use a tray and deliver all together", "Ask the waiter to help"], correct: 1 },
        { q: "What should you do if guests are not at their table when you arrive with their food?", a: ["Leave the food on the table", "Return to kitchen and inform the serving team", "Wait indefinitely"], correct: 1 },
        { q: "How should you handle timing coordination between appetizers and main courses?", a: ["Don't worry about timing", "Coordinate with serving team to ensure proper timing", "Let the kitchen decide timing"], correct: 1 },
    ];

    async function apiRequest(endpoint, method = 'GET', body = null) {
        const options = { method, headers: { 'Content-Type': 'application/json' } };
        if (body) { options.body = JSON.stringify(body); }
        try {
            // Use relative URL for production deployment
            const response = await fetch(`${endpoint}`, options);
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || 'An API error occurred');
            }
            const contentType = response.headers.get("content-type");
            return (contentType && contentType.includes("application/json")) ? response.json() : { success: true };
        } catch (error) {
            console.error('API Request Error:', error);
            document.getElementById('login-error').textContent = error.message;
            document.getElementById('login-error').style.display = 'block'; // Show error message
            throw error;
        }
    }

    function showView(viewId) {
        document.querySelectorAll('body > section').forEach(s => s.style.display = 'none');
        const view = document.getElementById(viewId);
        if (!view) {
            console.error("View not found:", viewId);
            return;
        }
        if (viewId === 'login-page') {
            view.style.display = 'flex';
            // Clear error messages when showing login page
            document.getElementById('login-error').textContent = '';
            document.getElementById('login-error').style.display = 'none';
        } else {
            view.style.display = 'block';
        }
    }

    function showPage(pageId) {
        document.querySelectorAll('#training-module .page').forEach(p => p.classList.remove('active'));
        const page = document.getElementById(pageId);
        if (page) {
            page.classList.add('active');
        }
    }

    document.getElementById('admin-login-form').addEventListener('submit', async e => {
        e.preventDefault();
        try {
            const adminIdInput = document.getElementById('admin-id');
            const loginAttempt = await apiRequest('/api/admin/login', 'POST', { adminId: adminIdInput.value, password: document.getElementById('admin-password').value });
            if (loginAttempt.success) {
                currentAdminId = adminIdInput.value; // MODIFIED: Store the admin ID on successful login
                showView('admin-dashboard');
                populateAdminDashboard();
            }
        } catch (error) {
            console.error("Admin login failed:", error);
        }
    });

    document.getElementById('staff-login-form').addEventListener('submit', async e => {
        e.preventDefault();
        try {
            const data = await apiRequest('/api/staff/login', 'POST', { staffId: document.getElementById('staff-id').value, password: document.getElementById('staff-password').value });
            if (data.success) {
                currentLoggedInUser = data.user;
                sessionStorage.setItem('loggedInUser', JSON.stringify(currentLoggedInUser));
                
                if (typeof currentLoggedInUser.progress === 'string') {
                    currentLoggedInUser.progress = JSON.parse(currentLoggedInUser.progress || '{}');
                }
                
                showView('training-module');
                document.getElementById('welcome-message').textContent = `Welcome, ${currentLoggedInUser.name}!`;
                renderModuleHub();
            }
        } catch (error) {
            console.error("Staff login failed:", error);
        }
    });

    function logout() {
        sessionStorage.removeItem('loggedInUser');
        sessionStorage.removeItem('currentPageIndex');
        currentLoggedInUser = null;
        currentAdminId = null; // MODIFIED: Clear the admin ID on logout
        document.getElementById('admin-login-form').reset();
        document.getElementById('staff-login-form').reset();
        document.getElementById('login-error').textContent = '';
        document.getElementById('login-error').style.display = 'none'; // Hide error message
        document.getElementById('create-user-message').textContent = ''; // Clear create user message
        showView('login-page');
    }

    document.getElementById('create-user-form').addEventListener('submit', async function (e) {
    e.preventDefault();
    const messageEl = document.getElementById('create-user-message');
    try {
        await apiRequest('/api/staff', 'POST', { 
            name: document.getElementById('new-staff-name').value, 
            staff_id: document.getElementById('new-staff-id').value, 
            email: document.getElementById('new-staff-email').value,
            password: document.getElementById('new-staff-password').value,
            adminId: currentAdminId // Add this line
        });
        messageEl.textContent = 'User created successfully!';
        messageEl.style.color = '#00ff00';
        this.reset();
        populateAdminDashboard();
    } catch (error) {
        messageEl.textContent = 'Error: Staff ID might already exist.';
        messageEl.style.color = '#ff4d4d';
    }
});

    async function populateAdminDashboard() {
        try {
            currentUsersData = await apiRequest('/api/staff');
            const tableBody = document.getElementById('progress-table-body');
            tableBody.innerHTML = '';
            currentUsersData.forEach(user => {
                const progress = JSON.parse(user.progress || '{}');
                const completedCount = modules.filter(m => progress[m] === 'completed').length;
                const progressPercent = Math.round((completedCount / modules.length) * 100);
                const row = document.createElement('tr');
                row.id = `user-row-${user.staff_id}`;
                // MODIFIED: Updated the row structure to display 'created_by'
                row.innerHTML = `
                    <td>${user.name}</td>
                    <td>${user.staff_id}</td>
                    <td>${user.email || 'N/A'}</td>
                    <td>${user.created_by || 'Unknown'}</td>
                    <td>${completedCount}/${modules.length} (${progressPercent}%)</td>
                    <td>${user.quiz_score !== null ? user.quiz_score : 'N/A'}</td>
                    <td class="actions">
                        <button class="btn action-btn" onclick="editUser('${user.staff_id}')">Edit</button>
                        <button class="btn action-btn delete" onclick="deleteUser('${user.staff_id}')">Delete</button>
                    </td>`;
                tableBody.appendChild(row);
            });
        } catch (error) { console.error("Failed to populate dashboard:", error); }
    }
    
    function editUser(staffId) {
        const user = currentUsersData.find(u => u.staff_id === staffId);
        if (!user) return;
        // MODIFIED: Updated the edit view and colspan to account for the new column layout
        document.getElementById(`user-row-${staffId}`).innerHTML = `
            <td><input type="text" id="edit-name-${staffId}" value="${user.name}"></td>
            <td><input type="text" id="edit-staff_id-${staffId}" value="${user.staff_id}"></td>
            <td><input type="email" id="edit-email-${staffId}" value="${user.email || ''}"></td>
            <td>${user.created_by || 'Unknown'}</td>
            <td colspan="2"><input type="text" id="edit-password-${staffId}" placeholder="Enter new password (optional)"></td>
            <td class="actions">
                <button class="btn action-btn save" onclick="saveUser('${user.staff_id}')">Save</button>
                <button class="btn action-btn" onclick="populateAdminDashboard()">Cancel</button>
            </td>`;
    }

    async function saveUser(currentStaffId) {
        const body = { 
            name: document.getElementById(`edit-name-${currentStaffId}`).value, 
            staff_id: document.getElementById(`edit-staff_id-${currentStaffId}`).value,
            email: document.getElementById(`edit-email-${currentStaffId}`).value,
        };
        const password = document.getElementById(`edit-password-${currentStaffId}`).value;
        if (password) { body.password = password; }
        try {
            await apiRequest(`/api/staff/${currentStaffId}`, 'PUT', body);
            populateAdminDashboard();
        } catch (error) { alert("Error saving user: " + error.message); }
    }

    async function deleteUser(staffId) {
        if (window.confirm(`Are you sure you want to delete user: ${staffId}?`)) {
            await apiRequest(`/api/staff/${staffId}`, 'DELETE');
            populateAdminDashboard();
        }
    }
    
    function getCompletedModuleCount() {
        if (!currentLoggedInUser) return 0;
        return modules.filter(m => currentLoggedInUser.progress[m] === 'completed').length;
    }
    
    function renderModuleHub() {
        sessionStorage.removeItem('currentPageIndex'); 
        const container = document.getElementById('module-grid-container');
        container.innerHTML = '';

        const completedCount = getCompletedModuleCount();
        const progressPercent = Math.round((completedCount / modules.length) * 100);
        const progressBar = document.getElementById('staff-progress-bar');
        progressBar.style.width = `${progressPercent}%`;
        progressBar.textContent = `${progressPercent}%`;

        modules.forEach((moduleName, index) => {
            const isCompleted = currentLoggedInUser.progress[moduleName] === 'completed';
            const formattedName = moduleName.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase());
            const box = document.createElement('div');
            box.className = `module-box ${isCompleted ? 'completed' : ''}`;
            box.textContent = formattedName;
            box.onclick = () => navigateToModule(index);
            container.appendChild(box);
        });

        const allModulesDone = completedCount === modules.length;
        const assessmentBox = document.createElement('div');
        assessmentBox.className = `module-box ${!allModulesDone ? 'locked' : ''}`;
        assessmentBox.textContent = 'Final Assessment';
        assessmentBox.onclick = () => {
            if (allModulesDone) {
                navigateToModule(modules.length);
            }
        };
        container.appendChild(assessmentBox);

        showPage('module-hub');
    }

    function navigateToModule(index) {
        sessionStorage.setItem('currentPageIndex', index);
        const pageId = index < modules.length ? modules[index] : 'assesment';
        showPage(pageId);
        populateModuleNav(index);

        if (index === modules.length) { 
            loadAssesment();
        }
    }

    function populateModuleNav(currentIndex) {
        const activePage = document.querySelector(`#training-module .page[data-module-index="${currentIndex}"]`);
        if (!activePage) return;

        const navContainer = activePage.querySelector('.module-nav');
        if (!navContainer) return;

        let navHTML = '<button class="btn" onclick="renderModuleHub()">← Back to Modules</button>';
        
        if (currentIndex < modules.length) { 
            const nextIndex = currentIndex + 1;
            
            // Check all checkboxes on the current page
            const checkBoxes = activePage.querySelectorAll('input[type="checkbox"]');
            let isDisabled = false; // Start enabled by default

            if (checkBoxes.length > 0) {
                // If checkboxes exist, check if they are all ticked
                isDisabled = !Array.from(checkBoxes).every(cb => cb.checked);
            }
            // If no checkboxes exist (like welcome page), button stays enabled

            const disabledState = isDisabled ? 'disabled' : '';
            const buttonText = nextIndex === modules.length ? 'Go to Assessment →' : 'Next →';

            navHTML += `<button class="btn next-btn ${disabledState}" onclick="completeAndNavigate(event, ${currentIndex}, ${nextIndex})" style="opacity: ${isDisabled ? '0.5' : '1'}; cursor: ${isDisabled ? 'not-allowed' : 'pointer'};">${buttonText}</button>`;
        }

        navContainer.innerHTML = navHTML;
    }

	async function completeAndNavigate(event, currentIndex, nextIndex) {
        // This check stops the function if the button has the 'disabled' class
        if (event.currentTarget.classList.contains('disabled')) {
            return; 
        }

        if (currentIndex < modules.length) {
            const moduleName = modules[currentIndex];
            if (currentLoggedInUser.progress[moduleName] !== 'completed') {
                currentLoggedInUser.progress[moduleName] = 'completed';
                await apiRequest('/api/progress', 'POST', { staffId: currentLoggedInUser.staff_id, progress: currentLoggedInUser.progress });
            }
        }
        navigateToModule(nextIndex);
    }

    function handleCheckboxChange(moduleIndex) {
        const modulePage = document.querySelector(`.page[data-module-index="${moduleIndex}"]`);
        if (!modulePage) return;
        
        // Check all checkboxes in the current module (including tab content)
        const allCheckboxes = modulePage.querySelectorAll('input[type="checkbox"]');
        const nextButton = modulePage.querySelector('.next-btn');
        
        if (nextButton) {
            const allChecked = Array.from(allCheckboxes).every(checkbox => checkbox.checked);
            if (allChecked) {
                nextButton.classList.remove('disabled');
                nextButton.style.opacity = '1';
                nextButton.style.cursor = 'pointer';
            } else {
                nextButton.classList.add('disabled');
                nextButton.style.opacity = '0.5';
                nextButton.style.cursor = 'not-allowed';
            }
        }
    }
    
    function openTab(evt, tabName) {
        const tabcontent = document.querySelectorAll("#responsibilities .tab-content");
        tabcontent.forEach(tab => tab.style.display = "none");
        const tabbuttons = document.querySelectorAll("#responsibilities .tab-button");
        tabbuttons.forEach(button => button.classList.remove("active"));
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.classList.add("active");
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function loadAssesment() {
        const assesmentArea = document.getElementById('assesmentArea');
        const assesmentResult = document.getElementById('assesmentResult');
        const certificateContainer = document.getElementById('certificate-container');
        const submitBtn = document.getElementById('submitAssesmentBtn');

        assesmentResult.innerHTML = '';
        certificateContainer.style.display = 'none';
        submitBtn.style.display = 'block';

        currentAssesmentQuestions = shuffleArray([...questionBank]).slice(0, 50);

        let assesmentHTML = '';
        currentAssesmentQuestions.forEach((q, index) => {
            assesmentHTML += `<div class="question" style="margin-bottom: 20px; padding: 15px; background-color: #2a2a2a; border-radius: 5px; border: 2px solid transparent;">`;
            assesmentHTML += `<p><strong>${index + 1}. ${q.q}</strong></p>`;
            q.a.forEach((option, optionIndex) => {
                assesmentHTML += `
                    <div style="margin: 5px 0;">
                        <input type="radio" name="question${index}" id="q${index}o${optionIndex}" value="${optionIndex}">
                        <label for="q${index}o${optionIndex}" style="color: #E0E0E0; cursor: pointer;">${option}</label>
                    </div>
                `;
            });
            assesmentHTML += `</div>`;
        });

        assesmentArea.innerHTML = assesmentHTML;
    }

    async function submitAssesment() {
        let score = 0;
        const questions = document.querySelectorAll('#assesmentArea .question');

        questions.forEach((questionElement, index) => {
            const selectedOption = questionElement.querySelector(`input[name="question${index}"]:checked`);
            if (selectedOption) {
                const selectedAnswer = parseInt(selectedOption.value, 10);
                if (selectedAnswer === currentAssesmentQuestions[index].correct) {
                    score++;
                    questionElement.style.borderColor = '#00ff00';
                } else {
                    questionElement.style.borderColor = '#ff4d4d';
                }
            } else {
                questionElement.style.borderColor = '#ff4d4d';
            }
        });

        const resultEl = document.getElementById('assesmentResult');
        const passingScore = 1; // Correct passing score
        resultEl.innerHTML = `<h3>Your Score: ${score} out of 50</h3>`;

        try {
            await apiRequest('/api/progress', 'POST', { staffId: currentLoggedInUser.staff_id, quizScore: `${score} out of 50` });
            currentLoggedInUser.quiz_score = `${score} out of 50`;
            sessionStorage.setItem('loggedInUser', JSON.stringify(currentLoggedInUser));
        } catch (err) {
            console.error("Failed to update quiz score", err);
            resultEl.innerHTML += `<p style="color: #ff4d4d;">Could not save your score. Please try again.</p>`;
        }

        if (score >= passingScore) {
            resultEl.innerHTML += `<p style="color: #00ff00; font-weight: bold;">Congratulations! You have passed the assessment.</p>`;
            displayCertificate();
            document.getElementById('submitAssesmentBtn').style.display = 'none';
        } else {
            resultEl.innerHTML += `<p style="color: #ff4d4d; font-weight: bold;">You did not pass. You need at least ${passingScore} to pass. Please review the modules and try again.</p>`;
            resultEl.innerHTML += `<button class="btn" onclick="loadAssesment()">Retry Assessment</button>`;
        }
        
        document.querySelectorAll('#assesmentForm input[type="radio"]').forEach(radio => radio.disabled = true);
    }

    function displayCertificate() {
        const certificateContainer = document.getElementById('certificate-container');
        const staffNameEl = document.getElementById('cert-staff-name');
        const dateEl = document.getElementById('cert-completion-date');
        const modulesListEl = document.getElementById('cert-modules-list');

        staffNameEl.textContent = currentLoggedInUser.name;
        dateEl.textContent = new Date().toLocaleDateString('en-GB');

        modulesListEl.innerHTML = '';
        const allModulesAndAssessment = [...modules, 'Final Assessment'];
        allModulesAndAssessment.forEach(moduleName => {
            const formattedName = moduleName.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase());
            const p = document.createElement('p');
            p.textContent = `✓ ${formattedName}`;
            modulesListEl.appendChild(p);
        });

        certificateContainer.style.display = 'block';
    }

    function checkForSavedSession() {
        const savedUserJSON = sessionStorage.getItem('loggedInUser');
        if (savedUserJSON) {
            currentLoggedInUser = JSON.parse(savedUserJSON);
            
            if (typeof currentLoggedInUser.progress === 'string') {
                currentLoggedInUser.progress = JSON.parse(currentLoggedInUser.progress || '{}');
            }

            showView('training-module');
            document.getElementById('welcome-message').textContent = `Welcome, ${currentLoggedInUser.name}!`;

            const savedIndex = sessionStorage.getItem('currentPageIndex');
            if (savedIndex !== null) {
                navigateToModule(parseInt(savedIndex, 10));
            } else {
                renderModuleHub();
            }
        }
    }

    document.addEventListener('DOMContentLoaded', checkForSavedSession);
</script>
</body>
</html>
